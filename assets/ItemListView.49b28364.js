import{d as x,c as n,F as C,r as E,h as a,e as h,w as q,a as P,t as c,f as u,b as l,R as I,G as W,k as y,_ as F,v as w,m as T,x as K,y as Q,z as J,I as X,p as Y,j as Z,i as ee,K as te,u as ae,s as le,q as re,o as se,l as B,T as ne,D as ie,A as oe}from"./index.5404861b.js";import{A as ue}from"./AdvancedSearch.929f40ec.js";import{P as ce}from"./ProfilesTable.2535bb43.js";import{E as pe}from"./ErrorMessage.c97c0168.js";const de={class:"list"},fe={class:"list-item-left"},_e={class:"list-item-title"},ge={key:0,class:"list-item-desc"},he=x({__name:"ItemList",props:{items:null,childName:null,childLink:null},setup(d){const e=d;return(f,_)=>(a(),n("div",de,[(a(!0),n(C,null,E(e.items,t=>(a(),h(l(I),{class:"list-item",to:t.link?t.link:""},{default:q(()=>[P("div",fe,[P("h4",_e,c(t.title||t.iri),1),t.description?(a(),n("div",ge,c(t.description),1)):u("",!0)]),e.childLink?(a(),h(l(I),{key:0,onClick:_[0]||(_[0]=W(()=>{},["stop"])),to:t.link+e.childLink,class:"btn outline sm child-btn"},{default:q(()=>[y(c(e.childName),1)]),_:2},1032,["to"])):u("",!0)]),_:2},1032,["to"]))),256))]))}});const me=F(he,[["__scopeId","data-v-c351f6e5"]]),M=d=>(Y("data-v-1eadacad"),d=d(),Z(),d),ve={class:"pagination"},ye={key:1},Pe=M(()=>P("i",{class:"fa-regular fa-ellipsis"},null,-1)),$e=[Pe],be=["value"],ke={key:4},Ce=M(()=>P("i",{class:"fa-regular fa-ellipsis"},null,-1)),qe=[Ce],Ie=x({__name:"PaginationComponent",props:{totalCount:null,perPage:null,currentPage:null,url:null},setup(d){const e=d,f=10,_=w(e.currentPage),t=T(()=>{const i=e.perPage||f;return Math.ceil(e.totalCount/i)});return K(_,(i,p)=>{i!==p&&X.push(`${e.url}?page=${i}${e.perPage?`&per_page=${e.perPage}`:""}`)}),(i,p)=>(a(),n("div",ve,[e.currentPage>2?(a(),h(l(I),{key:0,to:`${e.url}?page=1${e.perPage?`&per_page=${e.perPage}`:""}`,class:"btn outline pagination-btn"},{default:q(()=>[y(" 1 ")]),_:1},8,["to"])):u("",!0),e.currentPage>3?(a(),n("div",ye,$e)):u("",!0),e.currentPage>1?(a(),h(l(I),{key:2,to:`${e.url}?page=${e.currentPage-1}${e.perPage?`&per_page=${e.perPage}`:""}`,class:"btn outline pagination-btn"},{default:q(()=>[y(c(e.currentPage-1),1)]),_:1},8,["to"])):u("",!0),Q(P("select",{class:"pagination-btn",name:"",id:"",title:"Select page","onUpdate:modelValue":p[0]||(p[0]=m=>_.value=m)},[(a(!0),n(C,null,E([...Array(l(t))].map((m,o)=>o+1),m=>(a(),n("option",{value:m},c(m),9,be))),256))],512),[[J,_.value]]),e.currentPage<l(t)?(a(),h(l(I),{key:3,to:`${e.url}?page=${e.currentPage+1}${e.perPage?`&per_page=${e.perPage}`:""}`,class:"btn outline pagination-btn"},{default:q(()=>[y(c(e.currentPage+1),1)]),_:1},8,["to"])):u("",!0),e.currentPage<l(t)-2?(a(),n("div",ke,qe)):u("",!0),e.currentPage<l(t)-1?(a(),h(l(I),{key:5,to:`${e.url}?page=${l(t)}${e.perPage?`&per_page=${e.perPage}`:""}`,class:"btn outline pagination-btn"},{default:q(()=>[y(c(l(t)),1)]),_:1},8,["to"])):u("",!0)]))}});const Le=F(Ie,[["__scopeId","data-v-1eadacad"]]),Se={class:"page-title"},we=["innerHTML"],Ne={key:1},je=P("i",{class:"fa-regular fa-spinner-third fa-spin"},null,-1),De=x({__name:"ItemListView",props:{title:null,parentType:null,class:null,childButton:null,enableSearch:{type:Boolean},content:null},setup(d){const e=d,{namedNode:f}=ie,_=ee(oe),t=te(),i=ae(),{store:p,parseIntoStore:m,qname:o}=le(),{data:R,profiles:N,loading:V,error:z,doRequest:U}=re(),$=w([]),L=w(0),b=w(!1),v=T(()=>t.path.startsWith("/c/")?"CatPrez":t.path.startsWith("/s/")?"SpacePrez":t.path.startsWith("/v/")?"VocPrez":void 0),H=T(()=>t.query&&t.query.page?parseInt(t.query.page):1);function G(){let s=[];return v.value?(s.push({name:v.value,url:`/${v.value[0].toLowerCase()}`}),e.parentType&&(["dcat:Dataset","geo:FeatureCollection"].includes(e.parentType)&&(s.push({name:"Datasets",url:"/s/datasets"}),s.push({name:"Dataset",url:`/s/datasets/${t.params.datasetId}`})),["geo:FeatureCollection"].includes(e.parentType)&&(s.push({name:"Feature Collections",url:`/s/datasets/${t.params.datasetId}/collections`}),s.push({name:"Feature Collection",url:`/s/datasets/${t.params.datasetId}/collections/${t.params.featureCollectionId}`})))):e.parentType==="prof:Profile"&&s.push({name:"Profiles",url:"/profiles"}),s}function O(){return e.enableSearch?{}:{}}return se(()=>{let s="";t.query&&(t.query.page&&(s+=`?page=${t.query.page}`),t.query.per_page&&(t.query.page?s+="&":s+="?",s+=`per_page=${t.query.per_page}`)),U(`${_}${t.path}${s}`,()=>{const S=N.value.find(r=>r.default);t.query&&t.query._profile?t.query._profile===S.token&&!t.query._mediatype?b.value=!1:t.query._profile==="alt"&&!t.query._mediatype?b.value=!0:window.location.replace(`${_}${t.path}?_profile=${t.query._profile}${t.query._mediatype?`&_mediatype=${t.query._mediatype}`:""}`):b.value=!1,m(R.value);let D=o("rdfs:label"),A=o("dcterms:description");if(Object.keys(i.profiles).includes(S.uri)){const r=i.profiles[S.uri];r.labelPredicate&&(D=r.labelPredicate),r.descPredicate&&(A=r.descPredicate)}let j=[];if(e.class)L.value=parseInt(p.value.getObjects(f(o(e.class)),f(o("prez:count")),null)[0].value),j=p.value.getSubjects(f(o("a")),f(o(e.class)),null);else{const r=p.value.getQuads(null,f(o("prez:count")),null,null)[0];L.value=parseInt(r.object.value),j=p.value.getObjects(r.subject,f(o("rdfs:member")),null)}j.forEach(r=>{let g={iri:r.id};p.value.forEach(k=>{k.predicate.value===D?g.title=k.object.value:k.predicate.value===A?g.description=k.object.value:k.predicate.value===o("prez:link")&&(g.link=k.object.value)},r,null,null,null),$.value.push(g)}),$.value.sort((r,g)=>r.title&&g.title?r.title.localeCompare(g.title):r.title?-1:g.title?1:r.iri.localeCompare(g.iri)),b.value?i.rightNavConfig={enabled:!1}:i.rightNavConfig={enabled:!0,profiles:N.value,currentUrl:t.path},document.title=`${e.title} | Prez`,v.value?i.pageHeading={name:v.value,url:`/${v.value[0].toLowerCase()}`}:i.pageHeading={name:"Prez",url:"/"},i.breadcrumbs=[...G(),{name:e.title,url:t.path},...b.value?[{name:"Alternate Profiles",url:`${t.path}?_profile=alt`}]:[]]})}),(s,S)=>b.value?(a(),h(ce,{key:0,profiles:l(N),path:l(t).path},null,8,["profiles","path"])):(a(),n(C,{key:1},[P("h1",Se,c(e.title),1),e.content?(a(),n("p",{key:0,innerHTML:e.content},null,8,we)):u("",!0),$.value.length>0?(a(),n("p",Ne,"Showing "+c($.value.length)+" of "+c(L.value)+" items.",1)):u("",!0),l(z)?(a(),h(pe,{key:2,message:l(z)},null,8,["message"])):l(V)?(a(),n(C,{key:3},[je,y(" Loading... ")],64)):$.value.length>0?(a(),n(C,{key:4},[B(me,{items:$.value,childName:e.childButton?.name,childLink:e.childButton?.url},null,8,["items","childName","childLink"]),B(Le,{url:l(t).path,totalCount:L.value,currentPage:l(H)},null,8,["url","totalCount","currentPage"])],64)):(a(),n(C,{key:5},[y("No "+c(e.title)+" found.",1)],64)),e.enableSearch?(a(),h(ne,{key:6,to:"#right-bar-content"},[B(ue,{flavour:l(v),query:O()},null,8,["flavour","query"])])):u("",!0)],64))}});export{De as default};
