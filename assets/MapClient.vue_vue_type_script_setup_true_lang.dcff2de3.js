import{d as nt,i as it,x as st,L as rt,y as ot,e as at,b as K,$ as lt,P as ct,h as ht}from"./index.65cb3f6a.js";/* @preserve
* @terraformer/wkt - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:50 GMT-0700 (Pacific Daylight Time)
*/var d=function(n,t,s,a){for(s=s||{},a=n.length;a--;s[n[a]]=t);return s},f=[1,52],v=[1,59],O=[1,65],F=[1,79],G=[1,84],m=[14,18],x=[1,90],L=[1,96],B=[1,110],V={trace:function(){},yy:{},symbols_:{error:2,expressions:3,point:4,EOF:5,linestring:6,polygon:7,multipoint:8,multilinestring:9,multipolygon:10,coordinate:11,DOUBLE_TOK:12,ptarray:13,COMMA:14,ring_list:15,ring:16,"(":17,")":18,POINT:19,Z:20,ZM:21,M:22,EMPTY:23,point_untagged:24,polygon_list:25,polygon_untagged:26,point_list:27,LINESTRING:28,POLYGON:29,MULTIPOINT:30,MULTILINESTRING:31,MULTIPOLYGON:32,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"DOUBLE_TOK",14:"COMMA",17:"(",18:")",19:"POINT",20:"Z",21:"ZM",22:"M",23:"EMPTY",28:"LINESTRING",29:"POLYGON",30:"MULTIPOINT",31:"MULTILINESTRING",32:"MULTIPOLYGON"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[11,2],[11,3],[11,4],[13,3],[13,1],[15,3],[15,1],[16,3],[4,4],[4,5],[4,5],[4,5],[4,2],[24,1],[24,3],[25,3],[25,1],[26,3],[27,3],[27,1],[6,4],[6,5],[6,5],[6,5],[6,2],[7,4],[7,5],[7,5],[7,5],[7,2],[8,4],[8,5],[8,5],[8,5],[8,2],[9,4],[9,5],[9,5],[9,5],[9,2],[10,4],[10,5],[10,5],[10,5],[10,2]],performAction:function(n,t,s,a,o,i,g){var r=i.length-1;switch(o){case 1:case 2:case 3:case 4:case 5:case 6:return i[r-1];case 7:this.$=new W([Number(i[r-1]),Number(i[r])]);break;case 8:this.$=new W([Number(i[r-2]),Number(i[r-1]),Number(i[r])]);break;case 9:this.$=new W([Number(i[r-3]),Number(i[r-2]),Number(i[r-1]),Number(i[r])]);break;case 10:case 25:this.$=i[r-2].addPoint(i[r]);break;case 11:case 20:case 26:this.$=i[r];break;case 12:this.$=i[r-2].addRing(i[r]);break;case 13:this.$=new X(i[r]);break;case 14:this.$=new H(i[r-1]);break;case 15:this.$={type:"Point",coordinates:i[r-1].data[0]};break;case 16:this.$={type:"Point",coordinates:i[r-1].data[0],properties:{z:!0}};break;case 17:this.$={type:"Point",coordinates:i[r-1].data[0],properties:{z:!0,m:!0}};break;case 18:this.$={type:"Point",coordinates:i[r-1].data[0],properties:{m:!0}};break;case 19:this.$={type:"Point",coordinates:[]};break;case 21:case 24:this.$=i[r-1];break;case 22:this.$=i[r-2].addPolygon(i[r]);break;case 23:this.$=new Z(i[r]);break;case 27:this.$={type:"LineString",coordinates:i[r-1].data};break;case 28:this.$={type:"LineString",coordinates:i[r-1].data,properties:{z:!0}};break;case 29:this.$={type:"LineString",coordinates:i[r-1].data,properties:{m:!0}};break;case 30:this.$={type:"LineString",coordinates:i[r-1].data,properties:{z:!0,m:!0}};break;case 31:this.$={type:"LineString",coordinates:[]};break;case 32:this.$={type:"Polygon",coordinates:i[r-1].toJSON()};break;case 33:this.$={type:"Polygon",coordinates:i[r-1].toJSON(),properties:{z:!0}};break;case 34:this.$={type:"Polygon",coordinates:i[r-1].toJSON(),properties:{m:!0}};break;case 35:this.$={type:"Polygon",coordinates:i[r-1].toJSON(),properties:{z:!0,m:!0}};break;case 36:this.$={type:"Polygon",coordinates:[]};break;case 37:this.$={type:"MultiPoint",coordinates:i[r-1].data};break;case 38:this.$={type:"MultiPoint",coordinates:i[r-1].data,properties:{z:!0}};break;case 39:this.$={type:"MultiPoint",coordinates:i[r-1].data,properties:{m:!0}};break;case 40:this.$={type:"MultiPoint",coordinates:i[r-1].data,properties:{z:!0,m:!0}};break;case 41:this.$={type:"MultiPoint",coordinates:[]};break;case 42:this.$={type:"MultiLineString",coordinates:i[r-1].toJSON()};break;case 43:this.$={type:"MultiLineString",coordinates:i[r-1].toJSON(),properties:{z:!0}};break;case 44:this.$={type:"MultiLineString",coordinates:i[r-1].toJSON(),properties:{m:!0}};break;case 45:this.$={type:"MultiLineString",coordinates:i[r-1].toJSON(),properties:{z:!0,m:!0}};break;case 46:this.$={type:"MultiLineString",coordinates:[]};break;case 47:this.$={type:"MultiPolygon",coordinates:i[r-1].toJSON()};break;case 48:this.$={type:"MultiPolygon",coordinates:i[r-1].toJSON(),properties:{z:!0}};break;case 49:this.$={type:"MultiPolygon",coordinates:i[r-1].toJSON(),properties:{m:!0}};break;case 50:this.$={type:"MultiPolygon",coordinates:i[r-1].toJSON(),properties:{z:!0,m:!0}};break;case 51:this.$={type:"MultiPolygon",coordinates:[]};break}},table:[{3:1,4:2,6:3,7:4,8:5,9:6,10:7,19:[1,8],28:[1,9],29:[1,10],30:[1,11],31:[1,12],32:[1,13]},{1:[3]},{5:[1,14]},{5:[1,15]},{5:[1,16]},{5:[1,17]},{5:[1,18]},{5:[1,19]},{17:[1,20],20:[1,21],21:[1,22],22:[1,23],23:[1,24]},{17:[1,25],20:[1,26],21:[1,28],22:[1,27],23:[1,29]},{17:[1,30],20:[1,31],21:[1,33],22:[1,32],23:[1,34]},{17:[1,35],20:[1,36],21:[1,38],22:[1,37],23:[1,39]},{17:[1,40],20:[1,41],21:[1,43],22:[1,42],23:[1,44]},{17:[1,45],20:[1,46],21:[1,48],22:[1,47],23:[1,49]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{11:51,12:f,13:50},{17:[1,53]},{17:[1,54]},{17:[1,55]},{5:[2,19]},{11:58,12:f,17:v,24:57,27:56},{17:[1,60]},{17:[1,61]},{17:[1,62]},{5:[2,31]},{15:63,16:64,17:O},{17:[1,66]},{17:[1,67]},{17:[1,68]},{5:[2,36]},{11:58,12:f,17:v,24:57,27:69},{17:[1,70]},{17:[1,71]},{17:[1,72]},{5:[2,41]},{15:73,16:64,17:O},{17:[1,74]},{17:[1,75]},{17:[1,76]},{5:[2,46]},{17:F,25:77,26:78},{17:[1,80]},{17:[1,81]},{17:[1,82]},{5:[2,51]},{14:G,18:[1,83]},d(m,[2,11]),{12:[1,85]},{11:51,12:f,13:86},{11:51,12:f,13:87},{11:51,12:f,13:88},{14:x,18:[1,89]},d(m,[2,26]),d(m,[2,20]),{11:91,12:f},{11:58,12:f,17:v,24:57,27:92},{11:58,12:f,17:v,24:57,27:93},{11:58,12:f,17:v,24:57,27:94},{14:L,18:[1,95]},d(m,[2,13]),{11:51,12:f,13:97},{15:98,16:64,17:O},{15:99,16:64,17:O},{15:100,16:64,17:O},{14:x,18:[1,101]},{11:58,12:f,17:v,24:57,27:102},{11:58,12:f,17:v,24:57,27:103},{11:58,12:f,17:v,24:57,27:104},{14:L,18:[1,105]},{15:106,16:64,17:O},{15:107,16:64,17:O},{15:108,16:64,17:O},{14:B,18:[1,109]},d(m,[2,23]),{15:111,16:64,17:O},{17:F,25:112,26:78},{17:F,25:113,26:78},{17:F,25:114,26:78},{5:[2,15]},{11:115,12:f},d(m,[2,7],{12:[1,116]}),{14:G,18:[1,117]},{14:G,18:[1,118]},{14:G,18:[1,119]},{5:[2,27]},{11:58,12:f,17:v,24:120},{18:[1,121]},{14:x,18:[1,122]},{14:x,18:[1,123]},{14:x,18:[1,124]},{5:[2,32]},{16:125,17:O},{14:G,18:[1,126]},{14:L,18:[1,127]},{14:L,18:[1,128]},{14:L,18:[1,129]},{5:[2,37]},{14:x,18:[1,130]},{14:x,18:[1,131]},{14:x,18:[1,132]},{5:[2,42]},{14:L,18:[1,133]},{14:L,18:[1,134]},{14:L,18:[1,135]},{5:[2,47]},{17:F,26:136},{14:L,18:[1,137]},{14:B,18:[1,138]},{14:B,18:[1,139]},{14:B,18:[1,140]},d(m,[2,10]),d(m,[2,8],{12:[1,141]}),{5:[2,16]},{5:[2,17]},{5:[2,18]},d(m,[2,25]),d(m,[2,21]),{5:[2,28]},{5:[2,29]},{5:[2,30]},d(m,[2,12]),d(m,[2,14]),{5:[2,33]},{5:[2,34]},{5:[2,35]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,43]},{5:[2,44]},{5:[2,45]},d(m,[2,22]),d(m,[2,24]),{5:[2,48]},{5:[2,49]},{5:[2,50]},d(m,[2,9])],defaultActions:{14:[2,1],15:[2,2],16:[2,3],17:[2,4],18:[2,5],19:[2,6],24:[2,19],29:[2,31],34:[2,36],39:[2,41],44:[2,46],49:[2,51],83:[2,15],89:[2,27],95:[2,32],101:[2,37],105:[2,42],109:[2,47],117:[2,16],118:[2,17],119:[2,18],122:[2,28],123:[2,29],124:[2,30],127:[2,33],128:[2,34],129:[2,35],130:[2,38],131:[2,39],132:[2,40],133:[2,43],134:[2,44],135:[2,45],138:[2,48],139:[2,49],140:[2,50]},parseError:function(n,t){if(t.recoverable)this.trace(n);else{var s=new Error(n);throw s.hash=t,s}},parse:function(n){var t=this,s=[0],a=[null],o=[],i=this.table,g="",r=0,D=0,N=2,b=1,J=o.slice.call(arguments,1),h=Object.create(this.lexer),k={yy:{}};for(var I in this.yy)Object.prototype.hasOwnProperty.call(this.yy,I)&&(k.yy[I]=this.yy[I]);h.setInput(n,k.yy),k.yy.lexer=h,k.yy.parser=this,typeof h.yylloc>"u"&&(h.yylloc={});var E=h.yylloc;o.push(E);var M=h.options&&h.options.ranges;typeof k.yy.parseError=="function"?this.parseError=k.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Y=function(){var l;return l=h.lex()||b,typeof l!="number"&&(l=t.symbols_[l]||l),l},p,_,y,T,w={},R,P,z,$;;){if(_=s[s.length-1],this.defaultActions[_]?y=this.defaultActions[_]:((p===null||typeof p>"u")&&(p=Y()),y=i[_]&&i[_][p]),typeof y>"u"||!y.length||!y[0]){var A="";$=[];for(R in i[_])this.terminals_[R]&&R>N&&$.push("'"+this.terminals_[R]+"'");h.showPosition?A="Parse error on line "+(r+1)+`:
`+h.showPosition()+`
Expecting `+$.join(", ")+", got '"+(this.terminals_[p]||p)+"'":A="Parse error on line "+(r+1)+": Unexpected "+(p==b?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(A,{text:h.match,token:this.terminals_[p]||p,line:h.yylineno,loc:E,expected:$})}if(y[0]instanceof Array&&y.length>1)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+p);switch(y[0]){case 1:s.push(p),a.push(h.yytext),o.push(h.yylloc),s.push(y[1]),p=null,D=h.yyleng,g=h.yytext,r=h.yylineno,E=h.yylloc;break;case 2:if(P=this.productions_[y[1]][1],w.$=a[a.length-P],w._$={first_line:o[o.length-(P||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(P||1)].first_column,last_column:o[o.length-1].last_column},M&&(w._$.range=[o[o.length-(P||1)].range[0],o[o.length-1].range[1]]),T=this.performAction.apply(w,[g,D,r,k.yy,y[1],a,o].concat(J)),typeof T<"u")return T;P&&(s=s.slice(0,-1*P*2),a=a.slice(0,-1*P),o=o.slice(0,-1*P)),s.push(this.productions_[y[1]][0]),a.push(w.$),o.push(w._$),z=i[s[s.length-2]][s[s.length-1]],s.push(z);break;case 3:return!0}}return!0}},ut=function(){var e={EOF:1,parseError:function(t,s){if(this.yy.parser)this.yy.parser.parseError(t,s);else throw new Error(t)},setInput:function(t,s){return this.yy=s||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var s=t.match(/(?:\r\n?|\n).*/g);return s?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var s=t.length,a=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-s),this.offset-=s;var o=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),a.length-1&&(this.yylineno-=a.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:a?(a.length===o.length?this.yylloc.first_column:0)+o[o.length-a.length].length-a[0].length:this.yylloc.first_column-s},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-s]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),s=new Array(t.length+1).join("-");return t+this.upcomingInput()+`
`+s+"^"},test_match:function(t,s){var a,o,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),o=t[0].match(/(?:\r\n?|\n).*/g),o&&(this.yylineno+=o.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:o?o[o.length-1].length-o[o.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],a=this.performAction.call(this,this.yy,this,s,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a)return a;if(this._backtrack){for(var g in i)this[g]=i[g];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,s,a,o;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),g=0;g<i.length;g++)if(a=this._input.match(this.rules[i[g]]),a&&(!s||a[0].length>s[0].length)){if(s=a,o=g,this.options.backtrack_lexer){if(t=this.test_match(a,i[g]),t!==!1)return t;if(this._backtrack){s=!1;continue}else return!1}else if(!this.options.flex)break}return s?(t=this.test_match(s,i[o]),t!==!1?t:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){var t=this.conditionStack.length-1;return t>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return t=this.conditionStack.length-1-Math.abs(t||0),t>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,s,a,o){switch(a){case 0:break;case 1:return 17;case 2:return 18;case 3:return 12;case 4:return 19;case 5:return 28;case 6:return 29;case 7:return 30;case 8:return 31;case 9:return 32;case 10:return 14;case 11:return 23;case 12:return 22;case 13:return 20;case 14:return 21;case 15:return 5;case 16:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:-?[0-9]+(\.[0-9]+)?([eE][\-\+]?[0-9]+)?)/,/^(?:POINT\b)/,/^(?:LINESTRING\b)/,/^(?:POLYGON\b)/,/^(?:MULTIPOINT\b)/,/^(?:MULTILINESTRING\b)/,/^(?:MULTIPOLYGON\b)/,/^(?:,)/,/^(?:EMPTY\b)/,/^(?:M\b)/,/^(?:Z\b)/,/^(?:ZM\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],inclusive:!0}}};return e}();V.lexer=ut;function q(){this.yy={}}q.prototype=V;V.Parser=q;function W(e){this.data=[e],this.type="PointArray"}W.prototype.addPoint=function(e){return e.type==="PointArray"?this.data=this.data.concat(e.data):this.data.push(e),this};W.prototype.toJSON=function(){return this.data};function H(e){this.data=e,this.type="Ring"}H.prototype.toJSON=function(){for(var e=[],n=0;n<this.data.data.length;n++)e.push(this.data.data[n]);return e};function X(e){this.data=[e],this.type="RingList"}X.prototype.addRing=function(e){return this.data.push(e),this};X.prototype.toJSON=function(){for(var e=[],n=0;n<this.data.length;n++)e.push(this.data[n].toJSON());return e.length===1,e};function Z(e){this.data=[e],this.type="PolygonList"}Z.prototype.addPolygon=function(e){return this.data.push(e),this};Z.prototype.toJSON=function(){for(var e=[],n=0;n<this.data.length;n++)e=e.concat([this.data[n].toJSON()]);return e};var pt=function(n){var t;try{t=V.parse(n)}catch(s){throw Error("Unable to parse: "+s)}return t},U=(e=>(e.Nearby="Nearby",e.Contains="Contains",e.Overlaps="Overlaps",e.Within="Within",e))(U||{}),j=(e=>(e.None="No selection",e.Point="Point selected",e.Polygon="Polygon selected",e.Rectangle="Rectangle selected",e))(j||{});function _t(e){return Object.keys(e).map(n=>({value:e[n],text:n}))}function wt(e,n,t,s,a,o){return ft(dt(e.map(i=>gt(i,o))),mt(bt(n),t,s),a,o)}const yt=`PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX spatialF: <http://jena.apache.org/function/spatial#>
PREFIX unit: <http://www.opengis.net/def/uom/OGC/1.0/>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX void: <http://rdfs.org/ns/void#>
PREFIX prez: <https://prez.dev/>
`,gt=(e,n)=>` <${e}> <${n.spatial.membershipRelationship}> ?f_uri . 
<${e}> <${n.props.fcLabel}> ?fc_label
`,ft=(e,n,t,s)=>`${yt}
SELECT ?f_uri ?wkt ?fc_label ?f_label
WHERE {
    { ?f_uri geo:hasGeometry/geo:asWKT ?wkt;
    }
    ${e}
    OPTIONAL {?f_uri <${s.props.fcLabel}> ?potential_label }
    BIND(COALESCE(?potential_label, STR(?f_uri)) AS ?f_label)
    ${n}
}
LIMIT ${t}`,dt=e=>e.length>0?`
    { ${e.join(`}
    UNION
    {`)} }
`:"",mt=(e,n,t)=>{switch(n){case U.Contains:return`FILTER (geof:sfContains("${e}"^^geo:wktLiteral, ?wkt))`;case U.Within:return`FILTER (geof:sfWithin("${e}"^^geo:wktLiteral, ?wkt))`;case U.Nearby:return`FILTER (spatialF:nearby("${e}"^^geo:wktLiteral, ?wkt, ${t}, unit:kilometre))`;case U.Overlaps:return`FILTER (geof:sfOverlaps("${e}"^^geo:wktLiteral, ?wkt))`;default:return""}},bt=e=>{if(e.length==0)return"";if(e.length==1){const n=e[0];return`POINT (${n[0]} ${n[1]})`}else return`POLYGON ((${e.map(n=>`${n[0]} ${n[1]}`).join(", ")}))`};function Q(e){if(typeof e=="string"){const n=Number(e);if(!isNaN(n))return n}else if(typeof e=="object"&&e!==null){const n={};for(const t in e)n[t]=Q(e[t]);return n}return e}const Pt=nt({__name:"MapClient",props:{center:Object,zoom:Number,streetViewController:Boolean,geoWKT:Object,drawingModes:Object},emits:["selectionUpdated"],setup(e,{expose:n,emit:t}){const s=e,a=Q(it(lt)),o=st(),i=rt({value:{}});let g=null;const r=N=>{g=N};return n({drawShape:N=>{g&&g(N)}}),ot(o,N=>{N&&N.$mapPromise.then(b=>{const J={strokeColor:"green",strokeOpacity:.8,strokeWeight:2,fillColor:"green",fillOpacity:.35},h=c=>{i.value=c};let k=null,I=null;var E=new google.maps.InfoWindow,M=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:s.drawingModes?s.drawingModes.map(c=>google.maps.drawing.OverlayType[c]):[]},markerOptions:{icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},rectangleOptions:J});s.drawingModes&&M.setMap(b);let Y=[];const p=c=>{b.data.forEach(function(l){b.data.remove(l)}),Y=[],c.forEach(l=>{try{const S={type:"Feature",geometry:pt(l.wkt),properties:{uri:l.uri,link:l.link,label:l.label,id:l.id}};Y.push(b.data.addGeoJson(S));const C=new google.maps.LatLngBounds;b.data.forEach(function(tt){tt.getGeometry().forEachLatLng(function(et){C.extend(et)})}),h(l.wkt),b.fitBounds(C)}catch(u){console.log(u.message,"Unable to process ",l)}})};r(p),s.geoWKT&&p(s.geoWKT);const _=()=>{t("selectionUpdated",[],j.None),I&&I.setMap(null),I=null,k&&k.setMap(null),k=null};let y=document.createElement("div");y.style.margin="5px",y.style.zIndex="10";let T=document.createElement("div");T.style.lineHeight="0",y.appendChild(T);let w=document.createElement("button");w.title="Clear Map Shapes",w.id="clear-polygon-btn",w.innerHTML="X",w.addEventListener("click",_),T.appendChild(w),s.drawingModes&&b.controls[google.maps.ControlPosition.TOP_CENTER].push(y);let R=c=>(t("selectionUpdated",[c],j.Point),`POINT (${c[0]} ${c[1]})`),P=c=>{_(),I=c;let l=[c.getPosition().lng(),c.getPosition().lat()],u=R(l);h(u)},z=c=>"POLYGON (("+c.map(l=>`${l[0]} ${l[1]}`).join(", ")+"))",$=c=>{_(),k=c;let l=c.getBounds().getNorthEast(),u=c.getBounds().getSouthWest(),S=[[l.lng(),l.lat()],[l.lng(),u.lat()],[u.lng(),u.lat()],[u.lng(),l.lat()],[l.lng(),l.lat()]],C=z(S);h(C),t("selectionUpdated",S,j.Rectangle)};const A=c=>{_(),k=c;const l=c.getPath().getArray(),u=[];for(var S=0;S<l.length;S++)u.push([l[S].lng(),l[S].lat()]);u.length>0&&u.push(u[0]);const C=z(u);h(C),t("selectionUpdated",u,j.Polygon)};M.addListener("",P),M.addListener("markercomplete",P),M.addListener("rectanglecomplete",$),M.addListener("polygoncomplete",A),b.data.addListener("click",function(c){var l=c.feature,u=`<b><a target="_blank" href="${l.getProperty("link")}">${l.getProperty("label")}</a></b>`;E.setContent(u),E.setPosition(c.latLng),E.setOptions({pixelOffset:new google.maps.Size(0,-34)}),E.open(b)})})}),(N,b)=>{const J=ct("GMapMap");return ht(),at(J,{ref_key:"mapRef",ref:o,center:s.center||K(a).settings.options.center,"street-view-control":s.streetViewController||K(a).settings.options.streetViewController,zoom:s.zoom||K(a).settings.options.zoom,"map-type-id":"terrain",style:{width:"100%",height:"500px","background-color":"#eee"}},null,8,["center","street-view-control","zoom"])}}});export{U as A,j as S,Pt as _,Q as c,_t as e,wt as m};
