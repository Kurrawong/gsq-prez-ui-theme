import{d as L,i as w,K as A,u as B,q as I,s as N,v as g,x as V,o as U,c as l,l as z,b as u,e as S,F as _,k as E,r as P,f as $,A as F,h as s,w as K,a,t as b,p as M,j as O,L as T,_ as D}from"./index.2ccb0119.js";import{A as G}from"./AdvancedSearch.ed9ca726.js";import{E as H}from"./ErrorMessage.7d4bb6ee.js";const f=n=>(M("data-v-a70adec4"),n=n(),O(),n),J=f(()=>a("h1",{class:"page-title"},"Advanced Search",-1)),Q=f(()=>a("i",{class:"fa-regular fa-spinner-third fa-spin"},null,-1)),W=f(()=>a("h2",null,"Results",-1)),X=f(()=>a("div",{class:"results-cols"},[a("span",null,"Title"),a("span",null,"Source")],-1)),Y={key:0,class:"results"},Z={style:{color:"black"}},ee={key:1},se=L({__name:"SearchView",setup(n){const k=w(F),e=A(),h=B(),{data:q,loading:R,error:v,doRequest:x}=I(),{store:m,prefixes:ae,parseIntoStore:j,qname:o}=N(),C=g(e.query),c=g([]);function y(){e.query&&e.query.term&&(c.value=[],x(`${k}${e.fullPath}`,()=>{j(q.value),m.value.forSubjects(r=>{let i=r.value,d,t="";m.value.forEach(p=>{[o("skos:prefLabel"),o("dcterms:title"),o("rdfs:label")].includes(p.predicate.value)&&(d=p.object.value),p.predicate.value===o("prez:searchResultSource")&&(t=p.object.value.replace(o("prez:"),""))},r,null,null,null),c.value.push({uri:i,label:d,source:t})},null,null,null)}))}return V(()=>e.query,(r,i)=>{Object.keys(r).length>0&&r!==i&&y()},{deep:!0}),U(()=>{h.rightNavConfig={enabled:!1},document.title="Advanced Search | Prez",h.pageHeading={name:"Prez",url:"/"},h.breadcrumbs=[{name:"Advanced Search",url:"/search"}],Object.keys(e.query).length>0&&y()}),(r,i)=>{const d=T("RouterLink");return s(),l(_,null,[J,z(G,{query:C.value,fullPage:""},null,8,["query"]),u(v)?(s(),S(H,{key:0,message:u(v)},null,8,["message"])):u(R)?(s(),l(_,{key:1},[Q,E(" Loading... ")],64)):u(e).query&&u(e).query.term?(s(),l(_,{key:2},[W,X,c.value.length>0?(s(),l("div",Y,[(s(!0),l(_,null,P(c.value,t=>(s(),S(d,{class:"result",to:`/object?uri=${encodeURIComponent(t.uri)}`},{default:K(()=>[a("span",null,b(t.label||t.uri),1),a("span",Z,b(t.source),1)]),_:2},1032,["to"]))),256))])):(s(),l("p",ee,"No results found."))],64)):$("",!0)],64)}}});const oe=D(se,[["__scopeId","data-v-a70adec4"]]);export{oe as default};
