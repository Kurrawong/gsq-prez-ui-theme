import{_ as N,h as t,c as l,n as A,a as n,d as R,e as w,w as x,k as f,t as d,F as c,M as pe,f as B,l as U,r as D,N as G,O as X,v as j,o as Y,P as de,Q as K,p as Z,j as ee,x as _e,E as L,b as P,R as fe,S as te,L as le,i as ve,K as he,u as me,s as be,q as ye,m as ge,U as ke,T as Ce,A as $e,D as Pe}from"./index.693cdf1e.js";import{A as je}from"./AdvancedSearch.9ee9fd41.js";import{P as we}from"./ProfilesTable.146d6b49.js";const Te={},xe={class:"tooltip"},Se={class:"tooltip-text"};function Ie(p,e){return t(),l("span",xe,[A(p.$slots,"default",{},void 0,!0),n("span",Se,[A(p.$slots,"text",{},void 0,!0)])])}const Ne=N(Te,[["render",Ie],["__scopeId","data-v-5b46f6b0"]]),Re=["href"],Ae=R({__name:"PredCell",props:{iri:null,qname:null,label:null,description:null,explanation:null},setup(p){const e=p;return(u,b)=>(t(),l("th",null,[(t(),w(pe(e.description?Ne:"slot"),null,{text:x(()=>[f(d(e.description),1)]),default:x(()=>[n("a",{href:e.iri,target:"_blank",rel:"noopener noreferrer"},[e.label?(t(),l(c,{key:0},[f(d(e.label),1)],64)):e.qname?(t(),l(c,{key:1},[f(d(e.qname),1)],64)):(t(),l(c,{key:2},[f(d(e.iri),1)],64))],8,Re)]),_:1}))]))}}),Be={class:"prop-obj"},De={class:"obj-value"},Fe=["href"],Oe=["href"],Ve=["href"],Ue=["href"],ze={class:"obj-tag"},Ee={key:0,class:"badge outline",title:"Language"},Le=["href"],qe=R({__name:"ObjCell",props:{value:null,qname:null,datatype:null,language:null,description:null,termType:null,label:null,rows:null},setup(p){const e=p;return(u,b)=>(t(),l("div",Be,[n("div",De,[e.termType==="BlankNode"?(t(),l(c,{key:0},[f(" blank node ")],64)):e.termType==="NamedNode"?(t(),l(c,{key:1},[e.label?(t(),l("a",{key:0,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.label),9,Fe)):e.qname?(t(),l("a",{key:1,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.qname),9,Oe)):(t(),l("a",{key:2,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.value),9,Ve))],64)):(t(),l(c,{key:2},[e.value.startsWith("http")?(t(),l("a",{key:0,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.value),9,Ue)):(t(),l(c,{key:1},[f(d(e.value),1)],64))],64))]),n("div",ze,[e.language?(t(),l("span",Ee,d(e.language),1)):e.datatype?(t(),l("a",{key:1,href:e.datatype.value,target:"_blank",rel:"noopener noreferrer",class:"badge outline",title:"Datatype"},[e.datatype.qname?(t(),l(c,{key:0},[f(d(e.datatype.qname),1)],64)):(t(),l(c,{key:1},[f(d(e.datatype.value),1)],64))],8,Le)):B("",!0)])]))}});const Me=N(qe,[["__scopeId","data-v-027097f9"]]),We={class:"prop-objs"},Qe=R({__name:"PropRow",props:{iri:null,objs:null,qname:null,label:null,description:null,explanation:null,order:null},setup(p){const e=p;return(u,b)=>(t(),l("tr",null,[U(Ae,{iri:e.iri,qname:e.qname,label:e.label,description:e.description,explanation:e.explanation},null,8,["iri","qname","label","description","explanation"]),n("td",We,[(t(!0),l(c,null,D(e.objs,a=>(t(),w(Me,G(X(a)),null,16))),256))])]))}});const He=N(Qe,[["__scopeId","data-v-3863cf0a"]]),q=p=>(Z("data-v-00ae685d"),p=p(),ee(),p),Je={class:"page-title"},Ke={class:"iri"},Ge=q(()=>n("span",{class:"badge"},"IRI",-1)),Xe=["href"],Ye=q(()=>n("i",{class:"fa-regular fa-clipboard"},null,-1)),Ze=[Ye],et={class:"type"},tt=q(()=>n("span",{class:"badge"},"Type",-1)),lt=["href"],at={key:0},ot=R({__name:"PropTableNew",props:{item:null,properties:null,prefixes:null,hiddenPreds:null},setup(p){const e=p,u=j({});function b(r){let m="";return Object.entries(e.prefixes).forEach(([o,I])=>{r.value.startsWith(I)&&(m=o+":"+r.value.split(I)[1])}),m}function a(r){if(r==="a")return e.prefixes.rdf+"type";{const[m,o]=r.split(":");return e.prefixes[m]+o}}function g(r,m){return r.annotations.find(o=>o.predicate.value===a(m))?.object.value}function h(){navigator.clipboard.writeText(e.item.iri.trim())}return Y(()=>{e.properties.filter(r=>!e.hiddenPreds.includes(r.predicate.value)).forEach(r=>{var m,o;(m=u.value)[o=r.predicate.value]??(m[o]={iri:r.predicate.value,objs:[],qname:b(r.predicate),label:g(r.predicate,"rdfs:label"),description:g(r.predicate,"dcterms:description"),explanation:g(r.predicate,"dcterms:provenance"),order:0}),u.value[r.predicate.value].objs.push({value:r.object.value,qname:r.object instanceof de?b(r.object):void 0,datatype:r.object instanceof K?{value:r.object.datatype.value,qname:b(r.object.datatype)}:void 0,language:r.object instanceof K?r.object.language:void 0,description:void 0,termType:r.object.termType,label:void 0,rows:[]})})}),(r,m)=>(t(),l(c,null,[n("h1",Je,[f(d(e.item.title||e.item.iri)+" ",1),n("small",Ke,[Ge,n("a",{href:e.item.iri,target:"_blank",rel:"noopener noreferrer"},d(e.item.iri),9,Xe),n("button",{class:"btn outline sm",title:"Copy IRI",onClick:m[0]||(m[0]=o=>h())},Ze)]),n("small",et,[tt,n("a",{href:e.item.type,target:"_blank",rel:"noopener noreferrer"},d(e.item.type),9,lt)])]),A(r.$slots,"map",{},void 0,!0),e.item.description?(t(),l("p",at,[n("em",null,d(e.item.description),1)])):B("",!0),n("table",null,[A(r.$slots,"top",{},void 0,!0),(t(!0),l(c,null,D(Object.values(u.value).sort((o,I)=>o.order-I.order),o=>(t(),w(He,G(X(o)),null,16))),256)),A(r.$slots,"bottom",{},void 0,!0)])],64))}});const nt=N(ot,[["__scopeId","data-v-00ae685d"]]),rt={class:"concept-top"},st={key:1,class:"concept-left"},it=R({__name:"ConceptComponent",props:{iri:null,title:null,link:null,children:null,narrower:null,broader:null,baseUrl:null,collapseAll:{type:Boolean}},setup(p){const e=p,u=j(!0);return _e(()=>e.collapseAll,(b,a)=>{u.value=b}),(b,a)=>{const g=le("ConceptComponent",!0);return t(),l(c,null,[n("div",rt,[e.children?(t(),l("button",{key:0,class:"concept-left btn outline",onClick:a[0]||(a[0]=h=>u.value=!u.value)},[n("i",{class:L(`fa-regular fa-${u.value?"plus":"minus"}`)},null,2)])):(t(),l("div",st)),U(P(fe),{class:"concept",to:e.link},{default:x(()=>[f(d(e.title||e.iri),1)]),_:1},8,["to"])]),e.children?(t(),l("div",{key:0,class:L(`concept-children ${u.value?"collapse":""}`)},[(t(!0),l(c,null,D(e.children,h=>(t(),w(g,te(h,{baseUrl:e.baseUrl,collapseAll:e.collapseAll}),null,16,["baseUrl","collapseAll"]))),256))],2)):B("",!0)],64)}}});const ut=N(it,[["__scopeId","data-v-e0711a9f"]]),F=p=>(Z("data-v-768a983d"),p=p(),ee(),p),ct=F(()=>n("th",null,"Concepts",-1)),pt=F(()=>n("i",{class:"fa-regular fa-chevron-down"},null,-1)),dt=F(()=>n("i",{class:"fa-regular fa-chevron-up"},null,-1)),_t=F(()=>n("i",{class:"fa-regular fa-plus"},null,-1)),ft=F(()=>n("i",{class:"fa-regular fa-minus"},null,-1)),vt=R({__name:"PropTableView",props:{type:null,getChildren:{type:Boolean,default:!1},childPred:{default:""},childTitlePred:{default:""},childDisplayTitle:{default:"Members"},childButton:null,titlePred:null,descPred:null,enableSearch:{type:Boolean}},setup(p){const e=p,{namedNode:u}=Pe,b=ve($e),a=he(),g=me(),{store:h,prefixes:r,parseIntoStore:m,qname:o}=be(),{data:I,profiles:z,loading:ae,error:M,doRequest:oe}=ye(),ne=[o("a"),o("dcterms:identifier"),o("prez:count"),o(e.titlePred),o(e.descPred),...e.type==="skos:ConceptScheme"?[o("skos:hasTopConcept")]:[],...e.childPred?[o(e.childPred)]:[]],S=ge(()=>a.path.startsWith("/c/")?"CatPrez":a.path.startsWith("/s/")?"SpacePrez":a.path.startsWith("/v/")?"VocPrez":void 0),v=j({}),W=j([]),Q=j([]),E=j([]),O=j(!0),V=j(!0),T=j(!1);function re(){const i=h.value.getSubjects(u(o("a")),u(o(e.type)),null)[0];v.value.iri=i.id,h.value.forEach(s=>{if(s.predicate.value===o(e.titlePred)?v.value.title=s.object.value:s.predicate.value===o(e.descPred)?v.value.description=s.object.value:s.predicate.value===o("a")&&(v.value.type=s.object.value),!T.value){const k={termType:s.predicate.termType,value:s.predicate.value,id:s.predicate.id,annotations:h.value.getQuads(s.predicate,null,null,null)},C={subject:s.subject,predicate:k,object:s.object,value:s.value,graph:s.graph,termType:s.termType,equals:s.equals,toJSON:s.toJSON};E.value.push(C)}},i,null,null,null)}function se(){let i=[];h.value.forSubjects(_=>{let y={iri:_.id,narrower:[],broader:"",title:"",link:""};h.value.forEach($=>{$.predicate.value===o(e.childTitlePred)?y.title=$.object.value:$.predicate.value===o("prez:link")?y.link=$.object.value:$.predicate.value===o("skos:narrower")?y.narrower.push($.object.value):$.predicate.value===o("skos:broader")&&(y.broader=$.object.value)},_,null,null,null),i.push(y)},u(o("skos:inScheme")),u(v.value.iri),null);const s=h.value.getObjects(u(v.value.iri),u(o("skos:hasTopConcept")),null).map(_=>_.id),k=h.value.getSubjects(u(o("skos:topConceptOf")),u(v.value.iri),null).map(_=>_.id),C=[...new Set([...s,...k])],H=i.reduce((_,y,$)=>(_[y.iri]=$,_),{});let J=[];i.forEach(_=>{if(_.narrower.length>0&&_.narrower.forEach(y=>i[H[y]].broader=_.iri),C.includes(_.iri)){J.push(_);return}if(_.broader){const y=i[H[_.broader]];y.children=[...y.children||[],_]}}),Q.value=J}function ie(){e.type==="skos:ConceptScheme"?se():h.value.forObjects(i=>{let s={iri:i.id};h.value.forEach(k=>{k.predicate.value===o(e.childTitlePred)?s.title=k.object.value:k.predicate.value===o("prez:link")&&(s.link=k.object.value)},i,null,null,null),W.value.push(s)},u(v.value.iri),u(o(e.childPred)),null)}function ue(){let i=[];return S.value?(i.push({name:S.value,url:`/${S.value[0].toLowerCase()}`}),["skos:ConceptScheme","skos:Concept"].includes(e.type)&&i.push({name:"Vocabs",url:"/v/vocab"}),["skos:Concept"].includes(e.type)&&i.push({name:"Vocab",url:`/v/vocab/${a.params.vocabId}`}),["skos:Collection"].includes(e.type)&&i.push({name:"Collections",url:"/v/collection"}),["dcat:Catalog","dcat:Resource"].includes(e.type)&&i.push({name:"Catalogs",url:"/c/catalogs"}),["dcat:Resource"].includes(e.type)&&i.push({name:"Catalog",url:`/c/catalogs/${a.params.catalogId}`}),["dcat:Dataset","geo:FeatureCollection","geo:Feature"].includes(e.type)&&i.push({name:"Datasets",url:"/s/datasets"}),["geo:FeatureCollection","geo:Feature"].includes(e.type)&&(i.push({name:"Dataset",url:`/s/datasets/${a.params.datasetId}`}),i.push({name:"Feature Collections",url:`/s/datasets/${a.params.datasetId}/collections`})),["geo:Feature"].includes(e.type)&&(i.push({name:"Feature Collection",url:`/s/datasets/${a.params.datasetId}/collections/${a.params.featureCollectionId}`}),i.push({name:"Features",url:`/s/datasets/${a.params.datasetId}/collections/${a.params.featureCollectionId}/items`}))):e.type==="prof:Profile"&&i.push({name:"Profiles",url:"/profiles"}),i}function ce(){if(e.enableSearch)switch(e.type){case"skos:ConceptScheme":return{vocab:v.value.iri};case"dcat:Catalog":return{catalog:v.value.iri};case"dcat:Dataset":return{dataset:v.value.iri};case"geo:FeatureCollection":return{collection:v.value.iri};default:return{}}else return{}}return Y(()=>{oe(`${b}${a.path}`,()=>{if(a.query&&a.query._profile){const i=z.value.find(s=>s.default);a.query._profile===i.token&&!a.query._mediatype?T.value=!1:a.query._profile==="alt"&&!a.query._mediatype?T.value=!0:window.location.replace(`${b}${a.path}?_profile=${a.query._profile}${a.query._mediatype?`&_mediatype=${a.query._mediatype}`:""}`)}else T.value=!1;m(I.value),re(),!T.value&&e.getChildren&&ie(),T.value?g.rightNavConfig={enabled:!1}:g.rightNavConfig={enabled:!0,profiles:z.value,currentUrl:a.path},document.title=`${v.value.title||e.type.split(":")[1]} | Prez`,S.value?g.pageHeading={name:S.value,url:`/${S.value[0].toLowerCase()}`}:g.pageHeading={name:"Prez",url:"/"},g.breadcrumbs=[...ue(),{name:v.value.title||e.type.split(":")[1],url:a.path},...T.value?[{name:"Alternate Profiles",url:`${a.path}?_profile=alt`}]:[]]})}),(i,s)=>{const k=le("RouterLink");return T.value?(t(),w(we,{key:0,profiles:P(z),path:P(a).path},null,8,["profiles","path"])):(t(),l(c,{key:1},[E.value.length>0?(t(),w(nt,{key:0,item:v.value,properties:E.value,prefixes:P(r),hiddenPreds:ne},ke({_:2},[e.type==="skos:ConceptScheme"?{name:"bottom",fn:x(()=>[n("tr",null,[ct,n("td",null,[n("button",{id:"concept-hide-btn",class:"btn",onClick:s[0]||(s[0]=C=>O.value=!O.value)},[O.value?(t(),l(c,{key:0},[f("Show "),pt],64)):(t(),l(c,{key:1},[f("Hide "),dt],64))]),n("div",{class:L(`concepts ${O.value?"collapse":""}`)},[n("button",{id:"collapse-all-btn",onClick:s[1]||(s[1]=C=>V.value=!V.value),class:"btn"},[V.value?(t(),l(c,{key:0},[_t,f(" Expand all")],64)):(t(),l(c,{key:1},[ft,f(" Collapse all")],64))]),(t(!0),l(c,null,D(Q.value,C=>(t(),w(ut,te(C,{baseUrl:P(a).path,collapseAll:V.value}),null,16,["baseUrl","collapseAll"]))),256))],2)])])]),key:"0"}:e.getChildren?{name:"bottom",fn:x(()=>[n("tr",null,[n("th",null,d(e.childDisplayTitle),1),n("td",null,[n("div",{class:"children-list"},[(t(!0),l(c,null,D(W.value,C=>(t(),w(k,{to:C.link||""},{default:x(()=>[f(d(C.title||C.iri),1)]),_:2},1032,["to"]))),256))])])])]),key:"1"}:e.childButton?{name:"bottom",fn:x(()=>[n("tr",null,[n("th",null,"Members"),n("td",null,[U(k,{to:`${P(a).path}${e.childButton.url}`,class:"btn"},{default:x(()=>[f(d(e.childButton.name),1)]),_:1},8,["to"])])])]),key:"2"}:void 0]),1032,["item","properties","prefixes"])):P(ae)?(t(),l(c,{key:1},[f("loading...")],64)):P(M)?(t(),l(c,{key:2},[f("Network error: "+d(P(M)),1)],64)):B("",!0),e.enableSearch?(t(),w(Ce,{key:3,to:"#right-bar-content"},[U(je,{flavour:P(S),query:ce()},null,8,["flavour","query"])])):B("",!0)],64))}}});const yt=N(vt,[["__scopeId","data-v-768a983d"]]);export{yt as default};
