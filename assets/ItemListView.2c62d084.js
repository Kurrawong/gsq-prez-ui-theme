import{d as I,a as s,c as o,F as f,s as D,f as h,w as B,b as _,t as u,g as v,e as r,R as $,B as F,C as y,_ as z,u as R,m as V,l as U,r as H,H as W,o as A,k as E,T as M,D as G,i as K,I as O,x as q}from"./index.e5726de4.js";import{A as J}from"./AdvancedSearch.d1f4861c.js";const Q={class:"list"},X={class:"list-item-left"},Y={class:"list-item-title"},Z={key:0,class:"list-item-desc"},ee=I({__name:"ItemList",props:{items:null,childName:null,childLink:null},setup(k){const e=k;return(c,d)=>(s(),o("div",Q,[(s(!0),o(f,null,D(e.items,t=>(s(),h(r($),{class:"list-item",to:t.link?t.link:""},{default:B(()=>[_("div",X,[_("h4",Y,u(t.title||t.iri),1),t.description?(s(),o("div",Z,u(t.description),1)):v("",!0)]),e.childLink?(s(),h(r($),{key:0,onClick:d[0]||(d[0]=F(()=>{},["stop"])),to:t.link+e.childLink,class:"btn outline sm child-btn"},{default:B(()=>[y(u(e.childName),1)]),_:2},1032,["to"])):v("",!0)]),_:2},1032,["to"]))),256))]))}});const te=z(ee,[["__scopeId","data-v-b886a2c8"]]),ae={class:"page-title"},re=I({__name:"ItemListView",props:{title:null,parentType:null,itemPred:null,childButton:null,titlePred:null,descPred:null,enableSearch:{type:Boolean}},setup(k){const e=k,{namedNode:c}=G,d=K(q),t=O(),p=R(),{store:b,parseIntoStore:N,qname:n}=V(),{data:C,profiles:S,loading:x,error:L,doRequest:T}=U(),P=H([]),l=W(()=>t.path.startsWith("/c/")?"CatPrez":t.path.startsWith("/s/")?"SpacePrez":t.path.startsWith("/v/")?"VocPrez":void 0);function j(){let a=[];return l.value?(a.push({name:l.value,url:`/${l.value[0].toLowerCase()}`}),e.parentType&&(["dcat:Dataset","geo:FeatureCollection"].includes(e.parentType)&&(a.push({name:"Datasets",url:"/s/datasets"}),a.push({name:"Dataset",url:`/s/datasets/${t.params.datasetId}`})),["geo:FeatureCollection"].includes(e.parentType)&&(a.push({name:"Feature Collections",url:`/s/datasets/${t.params.datasetId}/collections`}),a.push({name:"Feature Collection",url:`/s/datasets/${t.params.datasetId}/collections/${t.params.featureCollectionId}`})))):e.parentType==="prof:Profile"&&a.push({name:"Profiles",url:"/profiles"}),a}function w(){return e.enableSearch?{}:{}}return A(()=>{T(`${d.replace(/\/$/,"")}${t.path}`,()=>{N(C.value);const a=b.value.getSubjects(c(n("a")),c(n("rdf:bag")),null)[0];b.value.forObjects(g=>{let m={iri:g.id};b.value.forEach(i=>{i.predicate.value===n(e.titlePred)?m.title=i.object.value:i.predicate.value===n(e.descPred)?m.description=i.object.value:i.predicate.value===n("prez:link")&&(m.link=i.object.value)},g,null,null,null),P.value.push(m)},a,c(n(e.itemPred)),null),p.rightNavConfig={enabled:!0,profiles:S.value,currentUrl:t.path},document.title=`${e.title} | Prez`,l.value?p.pageHeading={name:l.value,url:`/${l.value[0].toLowerCase()}`}:p.pageHeading={name:"Prez",url:"/"},p.breadcrumbs=[...j(),{name:e.title,url:t.path}]})}),(a,g)=>(s(),o(f,null,[_("h1",ae,u(e.title),1),_("div",null,[r(C)?(s(),h(te,{key:0,items:P.value,childName:e.childButton?.name,childLink:e.childButton?.url},null,8,["items","childName","childLink"])):r(x)?(s(),o(f,{key:1},[y("loading...")],64)):r(L)?(s(),o(f,{key:2},[y("Network error: "+u(r(L)),1)],64)):v("",!0)]),e.enableSearch?(s(),h(M,{key:0,to:"#right-bar-content"},[E(J,{flavour:r(l),query:w()},null,8,["flavour","query"])])):v("",!0)],64))}});export{re as default};
