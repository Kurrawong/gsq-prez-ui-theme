import{d as ke,i as ye,W as Je,v as D,X as zt,x as Jt,h as N,e as ht,b as U,L as qt,Y as ft,Z as Ze,$ as Ht,D as Vt,a0 as Gt,A as pt,m as Wt,c as x,F as ie,r as _e,E as Kt,t as W,_ as dt,o as yt,a as m,f as ne,k as H,y as ue,C as et,B as Ce,l as mt,p as Xt,j as Yt,u as Qt}from"./index.f07ea2ce.js";/* @preserve
* @terraformer/wkt - v2.1.1 - MIT
* Copyright (c) 2012-2022 Environmental Systems Research Institute, Inc.
* Tue Aug 02 2022 14:23:50 GMT-0700 (Pacific Daylight Time)
*/var M=function(t,n,s,o){for(s=s||{},o=t.length;o--;s[t[o]]=n);return s},I=[1,52],V=[1,59],j=[1,65],he=[1,79],fe=[1,84],F=[14,18],Q=[1,90],G=[1,96],we=[1,110],Ne={trace:function(){},yy:{},symbols_:{error:2,expressions:3,point:4,EOF:5,linestring:6,polygon:7,multipoint:8,multilinestring:9,multipolygon:10,coordinate:11,DOUBLE_TOK:12,ptarray:13,COMMA:14,ring_list:15,ring:16,"(":17,")":18,POINT:19,Z:20,ZM:21,M:22,EMPTY:23,point_untagged:24,polygon_list:25,polygon_untagged:26,point_list:27,LINESTRING:28,POLYGON:29,MULTIPOINT:30,MULTILINESTRING:31,MULTIPOLYGON:32,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"DOUBLE_TOK",14:"COMMA",17:"(",18:")",19:"POINT",20:"Z",21:"ZM",22:"M",23:"EMPTY",28:"LINESTRING",29:"POLYGON",30:"MULTIPOINT",31:"MULTILINESTRING",32:"MULTIPOLYGON"},productions_:[0,[3,2],[3,2],[3,2],[3,2],[3,2],[3,2],[11,2],[11,3],[11,4],[13,3],[13,1],[15,3],[15,1],[16,3],[4,4],[4,5],[4,5],[4,5],[4,2],[24,1],[24,3],[25,3],[25,1],[26,3],[27,3],[27,1],[6,4],[6,5],[6,5],[6,5],[6,2],[7,4],[7,5],[7,5],[7,5],[7,2],[8,4],[8,5],[8,5],[8,5],[8,2],[9,4],[9,5],[9,5],[9,5],[9,2],[10,4],[10,5],[10,5],[10,5],[10,2]],performAction:function(t,n,s,o,i,r,c){var l=r.length-1;switch(i){case 1:case 2:case 3:case 4:case 5:case 6:return r[l-1];case 7:this.$=new de([Number(r[l-1]),Number(r[l])]);break;case 8:this.$=new de([Number(r[l-2]),Number(r[l-1]),Number(r[l])]);break;case 9:this.$=new de([Number(r[l-3]),Number(r[l-2]),Number(r[l-1]),Number(r[l])]);break;case 10:case 25:this.$=r[l-2].addPoint(r[l]);break;case 11:case 20:case 26:this.$=r[l];break;case 12:this.$=r[l-2].addRing(r[l]);break;case 13:this.$=new qe(r[l]);break;case 14:this.$=new bt(r[l-1]);break;case 15:this.$={type:"Point",coordinates:r[l-1].data[0]};break;case 16:this.$={type:"Point",coordinates:r[l-1].data[0],properties:{z:!0}};break;case 17:this.$={type:"Point",coordinates:r[l-1].data[0],properties:{z:!0,m:!0}};break;case 18:this.$={type:"Point",coordinates:r[l-1].data[0],properties:{m:!0}};break;case 19:this.$={type:"Point",coordinates:[]};break;case 21:case 24:this.$=r[l-1];break;case 22:this.$=r[l-2].addPolygon(r[l]);break;case 23:this.$=new He(r[l]);break;case 27:this.$={type:"LineString",coordinates:r[l-1].data};break;case 28:this.$={type:"LineString",coordinates:r[l-1].data,properties:{z:!0}};break;case 29:this.$={type:"LineString",coordinates:r[l-1].data,properties:{m:!0}};break;case 30:this.$={type:"LineString",coordinates:r[l-1].data,properties:{z:!0,m:!0}};break;case 31:this.$={type:"LineString",coordinates:[]};break;case 32:this.$={type:"Polygon",coordinates:r[l-1].toJSON()};break;case 33:this.$={type:"Polygon",coordinates:r[l-1].toJSON(),properties:{z:!0}};break;case 34:this.$={type:"Polygon",coordinates:r[l-1].toJSON(),properties:{m:!0}};break;case 35:this.$={type:"Polygon",coordinates:r[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 36:this.$={type:"Polygon",coordinates:[]};break;case 37:this.$={type:"MultiPoint",coordinates:r[l-1].data};break;case 38:this.$={type:"MultiPoint",coordinates:r[l-1].data,properties:{z:!0}};break;case 39:this.$={type:"MultiPoint",coordinates:r[l-1].data,properties:{m:!0}};break;case 40:this.$={type:"MultiPoint",coordinates:r[l-1].data,properties:{z:!0,m:!0}};break;case 41:this.$={type:"MultiPoint",coordinates:[]};break;case 42:this.$={type:"MultiLineString",coordinates:r[l-1].toJSON()};break;case 43:this.$={type:"MultiLineString",coordinates:r[l-1].toJSON(),properties:{z:!0}};break;case 44:this.$={type:"MultiLineString",coordinates:r[l-1].toJSON(),properties:{m:!0}};break;case 45:this.$={type:"MultiLineString",coordinates:r[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 46:this.$={type:"MultiLineString",coordinates:[]};break;case 47:this.$={type:"MultiPolygon",coordinates:r[l-1].toJSON()};break;case 48:this.$={type:"MultiPolygon",coordinates:r[l-1].toJSON(),properties:{z:!0}};break;case 49:this.$={type:"MultiPolygon",coordinates:r[l-1].toJSON(),properties:{m:!0}};break;case 50:this.$={type:"MultiPolygon",coordinates:r[l-1].toJSON(),properties:{z:!0,m:!0}};break;case 51:this.$={type:"MultiPolygon",coordinates:[]};break}},table:[{3:1,4:2,6:3,7:4,8:5,9:6,10:7,19:[1,8],28:[1,9],29:[1,10],30:[1,11],31:[1,12],32:[1,13]},{1:[3]},{5:[1,14]},{5:[1,15]},{5:[1,16]},{5:[1,17]},{5:[1,18]},{5:[1,19]},{17:[1,20],20:[1,21],21:[1,22],22:[1,23],23:[1,24]},{17:[1,25],20:[1,26],21:[1,28],22:[1,27],23:[1,29]},{17:[1,30],20:[1,31],21:[1,33],22:[1,32],23:[1,34]},{17:[1,35],20:[1,36],21:[1,38],22:[1,37],23:[1,39]},{17:[1,40],20:[1,41],21:[1,43],22:[1,42],23:[1,44]},{17:[1,45],20:[1,46],21:[1,48],22:[1,47],23:[1,49]},{1:[2,1]},{1:[2,2]},{1:[2,3]},{1:[2,4]},{1:[2,5]},{1:[2,6]},{11:51,12:I,13:50},{17:[1,53]},{17:[1,54]},{17:[1,55]},{5:[2,19]},{11:58,12:I,17:V,24:57,27:56},{17:[1,60]},{17:[1,61]},{17:[1,62]},{5:[2,31]},{15:63,16:64,17:j},{17:[1,66]},{17:[1,67]},{17:[1,68]},{5:[2,36]},{11:58,12:I,17:V,24:57,27:69},{17:[1,70]},{17:[1,71]},{17:[1,72]},{5:[2,41]},{15:73,16:64,17:j},{17:[1,74]},{17:[1,75]},{17:[1,76]},{5:[2,46]},{17:he,25:77,26:78},{17:[1,80]},{17:[1,81]},{17:[1,82]},{5:[2,51]},{14:fe,18:[1,83]},M(F,[2,11]),{12:[1,85]},{11:51,12:I,13:86},{11:51,12:I,13:87},{11:51,12:I,13:88},{14:Q,18:[1,89]},M(F,[2,26]),M(F,[2,20]),{11:91,12:I},{11:58,12:I,17:V,24:57,27:92},{11:58,12:I,17:V,24:57,27:93},{11:58,12:I,17:V,24:57,27:94},{14:G,18:[1,95]},M(F,[2,13]),{11:51,12:I,13:97},{15:98,16:64,17:j},{15:99,16:64,17:j},{15:100,16:64,17:j},{14:Q,18:[1,101]},{11:58,12:I,17:V,24:57,27:102},{11:58,12:I,17:V,24:57,27:103},{11:58,12:I,17:V,24:57,27:104},{14:G,18:[1,105]},{15:106,16:64,17:j},{15:107,16:64,17:j},{15:108,16:64,17:j},{14:we,18:[1,109]},M(F,[2,23]),{15:111,16:64,17:j},{17:he,25:112,26:78},{17:he,25:113,26:78},{17:he,25:114,26:78},{5:[2,15]},{11:115,12:I},M(F,[2,7],{12:[1,116]}),{14:fe,18:[1,117]},{14:fe,18:[1,118]},{14:fe,18:[1,119]},{5:[2,27]},{11:58,12:I,17:V,24:120},{18:[1,121]},{14:Q,18:[1,122]},{14:Q,18:[1,123]},{14:Q,18:[1,124]},{5:[2,32]},{16:125,17:j},{14:fe,18:[1,126]},{14:G,18:[1,127]},{14:G,18:[1,128]},{14:G,18:[1,129]},{5:[2,37]},{14:Q,18:[1,130]},{14:Q,18:[1,131]},{14:Q,18:[1,132]},{5:[2,42]},{14:G,18:[1,133]},{14:G,18:[1,134]},{14:G,18:[1,135]},{5:[2,47]},{17:he,26:136},{14:G,18:[1,137]},{14:we,18:[1,138]},{14:we,18:[1,139]},{14:we,18:[1,140]},M(F,[2,10]),M(F,[2,8],{12:[1,141]}),{5:[2,16]},{5:[2,17]},{5:[2,18]},M(F,[2,25]),M(F,[2,21]),{5:[2,28]},{5:[2,29]},{5:[2,30]},M(F,[2,12]),M(F,[2,14]),{5:[2,33]},{5:[2,34]},{5:[2,35]},{5:[2,38]},{5:[2,39]},{5:[2,40]},{5:[2,43]},{5:[2,44]},{5:[2,45]},M(F,[2,22]),M(F,[2,24]),{5:[2,48]},{5:[2,49]},{5:[2,50]},M(F,[2,9])],defaultActions:{14:[2,1],15:[2,2],16:[2,3],17:[2,4],18:[2,5],19:[2,6],24:[2,19],29:[2,31],34:[2,36],39:[2,41],44:[2,46],49:[2,51],83:[2,15],89:[2,27],95:[2,32],101:[2,37],105:[2,42],109:[2,47],117:[2,16],118:[2,17],119:[2,18],122:[2,28],123:[2,29],124:[2,30],127:[2,33],128:[2,34],129:[2,35],130:[2,38],131:[2,39],132:[2,40],133:[2,43],134:[2,44],135:[2,45],138:[2,48],139:[2,49],140:[2,50]},parseError:function(t,n){if(n.recoverable)this.trace(t);else{var s=new Error(t);throw s.hash=n,s}},parse:function(t){var n=this,s=[0],o=[null],i=[],r=this.table,c="",l=0,u=0,f=2,p=1,E=i.slice.call(arguments,1),d=Object.create(this.lexer),h={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(h.yy[y]=this.yy[y]);d.setInput(t,h.yy),h.yy.lexer=d,h.yy.parser=this,typeof d.yylloc>"u"&&(d.yylloc={});var O=d.yylloc;i.push(O);var k=d.options&&d.options.ranges;typeof h.yy.parseError=="function"?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var B=function(){var g;return g=d.lex()||p,typeof g!="number"&&(g=n.symbols_[g]||g),g},R,C,T,L,b={},_,P,Y,re;;){if(C=s[s.length-1],this.defaultActions[C]?T=this.defaultActions[C]:((R===null||typeof R>"u")&&(R=B()),T=r[C]&&r[C][R]),typeof T>"u"||!T.length||!T[0]){var ce="";re=[];for(_ in r[C])this.terminals_[_]&&_>f&&re.push("'"+this.terminals_[_]+"'");d.showPosition?ce="Parse error on line "+(l+1)+`:
`+d.showPosition()+`
Expecting `+re.join(", ")+", got '"+(this.terminals_[R]||R)+"'":ce="Parse error on line "+(l+1)+": Unexpected "+(R==p?"end of input":"'"+(this.terminals_[R]||R)+"'"),this.parseError(ce,{text:d.match,token:this.terminals_[R]||R,line:d.yylineno,loc:O,expected:re})}if(T[0]instanceof Array&&T.length>1)throw new Error("Parse Error: multiple actions possible at state: "+C+", token: "+R);switch(T[0]){case 1:s.push(R),o.push(d.yytext),i.push(d.yylloc),s.push(T[1]),R=null,u=d.yyleng,c=d.yytext,l=d.yylineno,O=d.yylloc;break;case 2:if(P=this.productions_[T[1]][1],b.$=o[o.length-P],b._$={first_line:i[i.length-(P||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(P||1)].first_column,last_column:i[i.length-1].last_column},k&&(b._$.range=[i[i.length-(P||1)].range[0],i[i.length-1].range[1]]),L=this.performAction.apply(b,[c,u,l,h.yy,T[1],o,i].concat(E)),typeof L<"u")return L;P&&(s=s.slice(0,-1*P*2),o=o.slice(0,-1*P),i=i.slice(0,-1*P)),s.push(this.productions_[T[1]][0]),o.push(b.$),i.push(b._$),Y=r[s[s.length-2]][s[s.length-1]],s.push(Y);break;case 3:return!0}}return!0}},Zt=function(){var e={EOF:1,parseError:function(n,s){if(this.yy.parser)this.yy.parser.parseError(n,s);else throw new Error(n)},setInput:function(n,s){return this.yy=s||this.yy||{},this._input=n,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var n=this._input[0];this.yytext+=n,this.yyleng++,this.offset++,this.match+=n,this.matched+=n;var s=n.match(/(?:\r\n?|\n).*/g);return s?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),n},unput:function(n){var s=n.length,o=n.split(/(?:\r\n?|\n)/g);this._input=n+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-s),this.offset-=s;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),o.length-1&&(this.yylineno-=o.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:o?(o.length===i.length?this.yylloc.first_column:0)+i[i.length-o.length].length-o[0].length:this.yylloc.first_column-s},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-s]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),s=new Array(n.length+1).join("-");return n+this.upcomingInput()+`
`+s+"^"},test_match:function(n,s){var o,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=n[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.matches=n,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],o=this.performAction.call(this,this.yy,this,s,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o)return o;if(this._backtrack){for(var c in r)this[c]=r[c];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var n,s,o,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),c=0;c<r.length;c++)if(o=this._input.match(this.rules[r[c]]),o&&(!s||o[0].length>s[0].length)){if(s=o,i=c,this.options.backtrack_lexer){if(n=this.test_match(o,r[c]),n!==!1)return n;if(this._backtrack){s=!1;continue}else return!1}else if(!this.options.flex)break}return s?(n=this.test_match(s,r[i]),n!==!1?n:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return n||this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){var n=this.conditionStack.length-1;return n>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(n){return n=this.conditionStack.length-1-Math.abs(n||0),n>=0?this.conditionStack[n]:"INITIAL"},pushState:function(n){this.begin(n)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(n,s,o,i){switch(o){case 0:break;case 1:return 17;case 2:return 18;case 3:return 12;case 4:return 19;case 5:return 28;case 6:return 29;case 7:return 30;case 8:return 31;case 9:return 32;case 10:return 14;case 11:return 23;case 12:return 22;case 13:return 20;case 14:return 21;case 15:return 5;case 16:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:\()/,/^(?:\))/,/^(?:-?[0-9]+(\.[0-9]+)?([eE][\-\+]?[0-9]+)?)/,/^(?:POINT\b)/,/^(?:LINESTRING\b)/,/^(?:POLYGON\b)/,/^(?:MULTIPOINT\b)/,/^(?:MULTILINESTRING\b)/,/^(?:MULTIPOLYGON\b)/,/^(?:,)/,/^(?:EMPTY\b)/,/^(?:M\b)/,/^(?:Z\b)/,/^(?:ZM\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],inclusive:!0}}};return e}();Ne.lexer=Zt;function gt(){this.yy={}}gt.prototype=Ne;Ne.Parser=gt;function de(e){this.data=[e],this.type="PointArray"}de.prototype.addPoint=function(e){return e.type==="PointArray"?this.data=this.data.concat(e.data):this.data.push(e),this};de.prototype.toJSON=function(){return this.data};function bt(e){this.data=e,this.type="Ring"}bt.prototype.toJSON=function(){for(var e=[],t=0;t<this.data.data.length;t++)e.push(this.data.data[t]);return e};function qe(e){this.data=[e],this.type="RingList"}qe.prototype.addRing=function(e){return this.data.push(e),this};qe.prototype.toJSON=function(){for(var e=[],t=0;t<this.data.length;t++)e.push(this.data[t].toJSON());return e.length===1,e};function He(e){this.data=[e],this.type="PolygonList"}He.prototype.addPolygon=function(e){return this.data.push(e),this};He.prototype.toJSON=function(){for(var e=[],t=0;t<this.data.length;t++)e=e.concat([this.data[t].toJSON()]);return e};var en=function(t){var n;try{n=Ne.parse(t)}catch(s){throw Error("Unable to parse: "+s)}return n},ee=(e=>(e.Nearby="Nearby",e.Contains="Contains",e.Overlaps="Overlaps",e.Within="Within",e))(ee||{}),$=(e=>(e.None="No selection",e.Point="Point selected",e.Polygon="Polygon selected",e.Rectangle="Rectangle selected",e))($||{});function tn(e){return Object.keys(e).map(t=>({value:e[t],text:t}))}function nn(e,t,n,s,o,i){return on(an(e.map(r=>rn(r,i))),ln(cn(t),n,s),o,i)}const sn=`PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX geof: <http://www.opengis.net/def/function/geosparql/>
PREFIX spatialF: <http://jena.apache.org/function/spatial#>
PREFIX unit: <http://www.opengis.net/def/uom/OGC/1.0/>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX void: <http://rdfs.org/ns/void#>
PREFIX prez: <https://prez.dev/>
`,rn=(e,t)=>` <${e}> <${t.spatial.membershipRelationship}> ?f_uri . 
<${e}> <${t.props.fcLabel}> ?fc_label
`,on=(e,t,n,s)=>`${sn}
SELECT ?f_uri ?wkt ?fc_label ?f_label ?p ?o
WHERE {
    { ?f_uri geo:hasGeometry/geo:asWKT ?wkt;
  		?p ?o.
    VALUES ?p {<${s.props.fId}>}
    FILTER(DATATYPE(?o)!=prez:slug)
    }
    ${e}
    OPTIONAL {?f_uri <${s.props.fcLabel}> ?potential_label }
    BIND(COALESCE(?potential_label, STR(?f_uri)) AS ?f_label)
    ${t}
}
LIMIT ${n}`,an=e=>e.length>0?`
    { ${e.join(`}
    UNION
    {`)} }
`:"",ln=(e,t,n)=>{switch(t){case ee.Contains:return`FILTER (geof:sfContains("${e}"^^geo:wktLiteral, ?wkt))`;case ee.Within:return`FILTER (geof:sfWithin("${e}"^^geo:wktLiteral, ?wkt))`;case ee.Nearby:return`FILTER (spatialF:nearby("${e}"^^geo:wktLiteral, ?wkt, ${n}, unit:kilometre))`;case ee.Overlaps:return`FILTER (geof:sfOverlaps("${e}"^^geo:wktLiteral, ?wkt))`;default:return""}},cn=e=>{if(e.length==0)return"";if(e.length==1){const t=e[0];return`POINT (${t[0]} ${t[1]})`}else return`POLYGON ((${e.map(t=>`${t[0]} ${t[1]}`).join(", ")}))`};function Te(e){if(typeof e=="string"){const t=Number(e);if(!isNaN(t))return t}else if(typeof e=="object"&&e!==null){const t={};for(const n in e)t[n]=Te(e[n]);return t}return e}const un=ke({__name:"MapClient",props:{center:Object,zoom:Number,streetViewController:Boolean,geoWKT:Object,drawingModes:Object},emits:["selectionUpdated"],setup(e,{expose:t,emit:n}){const s=e,o=Te(ye(Je)),i=D(),r=zt({value:{}});let c=null;const l=f=>{c=f};return t({drawShape:f=>{c&&c(f)}}),Jt(i,f=>{f&&f.$mapPromise.then(p=>{const E={strokeColor:"green",strokeOpacity:.8,strokeWeight:2,fillColor:"green",fillOpacity:.35},d=S=>{r.value=S};let h=null,y=null;var O=new google.maps.InfoWindow,k=new google.maps.drawing.DrawingManager({drawingMode:google.maps.drawing.OverlayType.MARKER,drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:s.drawingModes?s.drawingModes.map(S=>google.maps.drawing.OverlayType[S]):[]},markerOptions:{icon:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},rectangleOptions:E});s.drawingModes&&k.setMap(p);let B=[];const R=S=>{p.data.forEach(function(g){p.data.remove(g)}),B=[],S.forEach(g=>{try{const q={type:"Feature",geometry:en(g.wkt),properties:{uri:g.uri,link:g.link,label:g.label,id:g.id}};B.push(p.data.addGeoJson(q));const oe=new google.maps.LatLngBounds;p.data.forEach(function(jt){jt.getGeometry().forEachLatLng(function($t){oe.extend($t)})}),d(g.wkt),p.fitBounds(oe)}catch(A){console.log(A.message,"Unable to process ",g)}})};l(R),s.geoWKT&&R(s.geoWKT);const C=()=>{n("selectionUpdated",[],$.None),y&&y.setMap(null),y=null,h&&h.setMap(null),h=null};let T=document.createElement("div");T.style.margin="5px",T.style.zIndex="10";let L=document.createElement("div");L.style.lineHeight="0",T.appendChild(L);let b=document.createElement("button");b.title="Clear Map Shapes",b.id="clear-polygon-btn",b.innerHTML="X",b.addEventListener("click",C),L.appendChild(b),s.drawingModes&&p.controls[google.maps.ControlPosition.TOP_CENTER].push(T);let _=S=>(n("selectionUpdated",[S],$.Point),`POINT (${S[0]} ${S[1]})`),P=S=>{C(),y=S;let g=[S.getPosition().lng(),S.getPosition().lat()],A=_(g);d(A)},Y=S=>"POLYGON (("+S.map(g=>`${g[0]} ${g[1]}`).join(", ")+"))",re=S=>{C(),h=S;let g=S.getBounds().getNorthEast(),A=S.getBounds().getSouthWest(),q=[[g.lng(),g.lat()],[g.lng(),A.lat()],[A.lng(),A.lat()],[A.lng(),g.lat()],[g.lng(),g.lat()]],oe=Y(q);d(oe),n("selectionUpdated",q,$.Rectangle)};const ce=S=>{C(),h=S;const g=S.getPath().getArray(),A=[];for(var q=0;q<g.length;q++)A.push([g[q].lng(),g[q].lat()]);A.length>0&&A.push(A[0]);const oe=Y(A);d(oe),n("selectionUpdated",A,$.Polygon)};k.addListener("",P),k.addListener("markercomplete",P),k.addListener("rectanglecomplete",re),k.addListener("polygoncomplete",ce),p.data.addListener("click",function(S){var g=S.feature,A=`<b><a target="_blank" href="${g.getProperty("link")}">${g.getProperty("label")}</a></b>`;O.setContent(A),O.setPosition(S.latLng),O.setOptions({pixelOffset:new google.maps.Size(0,-34)}),O.open(p)})})}),(f,p)=>{const E=qt("GMapMap");return N(),ht(E,{ref_key:"mapRef",ref:i,center:s.center||U(o).settings.options.center,"street-view-control":s.streetViewController||U(o).settings.options.streetViewController,zoom:s.zoom||U(o).settings.options.zoom,"map-type-id":"terrain",style:{width:"100%",height:"500px"}},null,8,["center","street-view-control","zoom"])}}});function wt(e,t){return function(){return e.apply(t,arguments)}}const{toString:_t}=Object.prototype,{getPrototypeOf:Ve}=Object,Ge=(e=>t=>{const n=_t.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),X=e=>(e=e.toLowerCase(),t=>Ge(t)===e),xe=e=>t=>typeof t===e,{isArray:le}=Array,me=xe("undefined");function hn(e){return e!==null&&!me(e)&&e.constructor!==null&&!me(e.constructor)&&te(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Et=X("ArrayBuffer");function fn(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Et(e.buffer),t}const pn=xe("string"),te=xe("function"),St=xe("number"),We=e=>e!==null&&typeof e=="object",dn=e=>e===!0||e===!1,Ee=e=>{if(Ge(e)!=="object")return!1;const t=Ve(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yn=X("Date"),mn=X("File"),gn=X("Blob"),bn=X("FileList"),wn=e=>We(e)&&te(e.pipe),_n=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||_t.call(e)===t||te(e.toString)&&e.toString()===t)},En=X("URLSearchParams"),Sn=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ge(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,o;if(typeof e!="object"&&(e=[e]),le(e))for(s=0,o=e.length;s<o;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let c;for(s=0;s<r;s++)c=i[s],t.call(null,e[c],c,e)}}function Ot(e,t){t=t.toLowerCase();const n=Object.keys(e);let s=n.length,o;for(;s-- >0;)if(o=n[s],t===o.toLowerCase())return o;return null}const Rt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Pt=e=>!me(e)&&e!==Rt;function Be(){const{caseless:e}=Pt(this)&&this||{},t={},n=(s,o)=>{const i=e&&Ot(t,o)||o;Ee(t[i])&&Ee(s)?t[i]=Be(t[i],s):Ee(s)?t[i]=Be({},s):le(s)?t[i]=s.slice():t[i]=s};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&ge(arguments[s],n);return t}const On=(e,t,n,{allOwnKeys:s}={})=>(ge(t,(o,i)=>{n&&te(o)?e[i]=wt(o,n):e[i]=o},{allOwnKeys:s}),e),Rn=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Pn=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},kn=(e,t,n,s)=>{let o,i,r;const c={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)r=o[i],(!s||s(r,e,t))&&!c[r]&&(t[r]=e[r],c[r]=!0);e=n!==!1&&Ve(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Nn=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},Tn=e=>{if(!e)return null;if(le(e))return e;let t=e.length;if(!St(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},xn=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ve(Uint8Array)),vn=(e,t)=>{const s=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=s.next())&&!o.done;){const i=o.value;t.call(e,i[0],i[1])}},Ln=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},An=X("HTMLFormElement"),Cn=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,o){return s.toUpperCase()+o}),tt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),In=X("RegExp"),kt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};ge(n,(o,i)=>{t(o,i,e)!==!1&&(s[i]=o)}),Object.defineProperties(e,s)},Mn=e=>{kt(e,(t,n)=>{if(te(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(!!te(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Fn=(e,t)=>{const n={},s=o=>{o.forEach(i=>{n[i]=!0})};return le(e)?s(e):s(String(e).split(t)),n},Un=()=>{},Dn=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ie="abcdefghijklmnopqrstuvwxyz",nt="0123456789",Nt={DIGIT:nt,ALPHA:Ie,ALPHA_DIGIT:Ie+Ie.toUpperCase()+nt},Bn=(e=16,t=Nt.ALPHA_DIGIT)=>{let n="";const{length:s}=t;for(;e--;)n+=t[Math.random()*s|0];return n};function jn(e){return!!(e&&te(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const $n=e=>{const t=new Array(10),n=(s,o)=>{if(We(s)){if(t.indexOf(s)>=0)return;if(!("toJSON"in s)){t[o]=s;const i=le(s)?[]:{};return ge(s,(r,c)=>{const l=n(r,o+1);!me(l)&&(i[c]=l)}),t[o]=void 0,i}}return s};return n(e,0)},a={isArray:le,isArrayBuffer:Et,isBuffer:hn,isFormData:_n,isArrayBufferView:fn,isString:pn,isNumber:St,isBoolean:dn,isObject:We,isPlainObject:Ee,isUndefined:me,isDate:yn,isFile:mn,isBlob:gn,isRegExp:In,isFunction:te,isStream:wn,isURLSearchParams:En,isTypedArray:xn,isFileList:bn,forEach:ge,merge:Be,extend:On,trim:Sn,stripBOM:Rn,inherits:Pn,toFlatObject:kn,kindOf:Ge,kindOfTest:X,endsWith:Nn,toArray:Tn,forEachEntry:vn,matchAll:Ln,isHTMLForm:An,hasOwnProperty:tt,hasOwnProp:tt,reduceDescriptors:kt,freezeMethods:Mn,toObjectSet:Fn,toCamelCase:Cn,noop:Un,toFiniteNumber:Dn,findKey:Ot,global:Rt,isContextDefined:Pt,ALPHABET:Nt,generateString:Bn,isSpecCompliantForm:jn,toJSONObject:$n};function w(e,t,n,s,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o)}a.inherits(w,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Tt=w.prototype,xt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xt[e]={value:e}});Object.defineProperties(w,xt);Object.defineProperty(Tt,"isAxiosError",{value:!0});w.from=(e,t,n,s,o,i)=>{const r=Object.create(Tt);return a.toFlatObject(e,r,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),w.call(r,e.message,t,n,s,o),r.cause=e,r.name=e.name,i&&Object.assign(r,i),r};const zn=null;function je(e){return a.isPlainObject(e)||a.isArray(e)}function vt(e){return a.endsWith(e,"[]")?e.slice(0,-2):e}function st(e,t,n){return e?e.concat(t).map(function(o,i){return o=vt(o),!n&&i?"["+o+"]":o}).join(n?".":""):t}function Jn(e){return a.isArray(e)&&!e.some(je)}const qn=a.toFlatObject(a,{},null,function(t){return/^is[A-Z]/.test(t)});function ve(e,t,n){if(!a.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=a.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,O){return!a.isUndefined(O[y])});const s=n.metaTokens,o=n.visitor||f,i=n.dots,r=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&a.isSpecCompliantForm(t);if(!a.isFunction(o))throw new TypeError("visitor must be a function");function u(h){if(h===null)return"";if(a.isDate(h))return h.toISOString();if(!l&&a.isBlob(h))throw new w("Blob is not supported. Use a Buffer instead.");return a.isArrayBuffer(h)||a.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function f(h,y,O){let k=h;if(h&&!O&&typeof h=="object"){if(a.endsWith(y,"{}"))y=s?y:y.slice(0,-2),h=JSON.stringify(h);else if(a.isArray(h)&&Jn(h)||(a.isFileList(h)||a.endsWith(y,"[]"))&&(k=a.toArray(h)))return y=vt(y),k.forEach(function(R,C){!(a.isUndefined(R)||R===null)&&t.append(r===!0?st([y],C,i):r===null?y:y+"[]",u(R))}),!1}return je(h)?!0:(t.append(st(O,y,i),u(h)),!1)}const p=[],E=Object.assign(qn,{defaultVisitor:f,convertValue:u,isVisitable:je});function d(h,y){if(!a.isUndefined(h)){if(p.indexOf(h)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(h),a.forEach(h,function(k,B){(!(a.isUndefined(k)||k===null)&&o.call(t,k,a.isString(B)?B.trim():B,y,E))===!0&&d(k,y?y.concat(B):[B])}),p.pop()}}if(!a.isObject(e))throw new TypeError("data must be an object");return d(e),t}function rt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Ke(e,t){this._pairs=[],e&&ve(e,this,t)}const Lt=Ke.prototype;Lt.append=function(t,n){this._pairs.push([t,n])};Lt.toString=function(t){const n=t?function(s){return t.call(this,s,rt)}:rt;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Hn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function At(e,t,n){if(!t)return e;const s=n&&n.encode||Hn,o=n&&n.serialize;let i;if(o?i=o(t,n):i=a.isURLSearchParams(t)?t.toString():new Ke(t,n).toString(s),i){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Vn{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){a.forEach(this.handlers,function(s){s!==null&&t(s)})}}const ot=Vn,Ct={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Gn=typeof URLSearchParams<"u"?URLSearchParams:Ke,Wn=typeof FormData<"u"?FormData:null,Kn=typeof Blob<"u"?Blob:null,Xn=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Yn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),z={isBrowser:!0,classes:{URLSearchParams:Gn,FormData:Wn,Blob:Kn},isStandardBrowserEnv:Xn,isStandardBrowserWebWorkerEnv:Yn,protocols:["http","https","file","blob","url","data"]};function Qn(e,t){return ve(e,new z.classes.URLSearchParams,Object.assign({visitor:function(n,s,o,i){return z.isNode&&a.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function Zn(e){return a.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function es(e){const t={},n=Object.keys(e);let s;const o=n.length;let i;for(s=0;s<o;s++)i=n[s],t[i]=e[i];return t}function It(e){function t(n,s,o,i){let r=n[i++];const c=Number.isFinite(+r),l=i>=n.length;return r=!r&&a.isArray(o)?o.length:r,l?(a.hasOwnProp(o,r)?o[r]=[o[r],s]:o[r]=s,!c):((!o[r]||!a.isObject(o[r]))&&(o[r]=[]),t(n,s,o[r],i)&&a.isArray(o[r])&&(o[r]=es(o[r])),!c)}if(a.isFormData(e)&&a.isFunction(e.entries)){const n={};return a.forEachEntry(e,(s,o)=>{t(Zn(s),o,n,0)}),n}return null}const ts={"Content-Type":void 0};function ns(e,t,n){if(a.isString(e))try{return(t||JSON.parse)(e),a.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const Le={transitional:Ct,adapter:["xhr","http"],transformRequest:[function(t,n){const s=n.getContentType()||"",o=s.indexOf("application/json")>-1,i=a.isObject(t);if(i&&a.isHTMLForm(t)&&(t=new FormData(t)),a.isFormData(t))return o&&o?JSON.stringify(It(t)):t;if(a.isArrayBuffer(t)||a.isBuffer(t)||a.isStream(t)||a.isFile(t)||a.isBlob(t))return t;if(a.isArrayBufferView(t))return t.buffer;if(a.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Qn(t,this.formSerializer).toString();if((c=a.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return ve(c?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||o?(n.setContentType("application/json",!1),ns(t)):t}],transformResponse:[function(t){const n=this.transitional||Le.transitional,s=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&a.isString(t)&&(s&&!this.responseType||o)){const r=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(c){if(r)throw c.name==="SyntaxError"?w.from(c,w.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:z.classes.FormData,Blob:z.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};a.forEach(["delete","get","head"],function(t){Le.headers[t]={}});a.forEach(["post","put","patch"],function(t){Le.headers[t]=a.merge(ts)});const Xe=Le,ss=a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rs=e=>{const t={};let n,s,o;return e&&e.split(`
`).forEach(function(r){o=r.indexOf(":"),n=r.substring(0,o).trim().toLowerCase(),s=r.substring(o+1).trim(),!(!n||t[n]&&ss[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},it=Symbol("internals");function pe(e){return e&&String(e).trim().toLowerCase()}function Se(e){return e===!1||e==null?e:a.isArray(e)?e.map(Se):String(e)}function os(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}function is(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function Me(e,t,n,s,o){if(a.isFunction(s))return s.call(this,t,n);if(o&&(t=n),!!a.isString(t)){if(a.isString(s))return t.indexOf(s)!==-1;if(a.isRegExp(s))return s.test(t)}}function as(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function ls(e,t){const n=a.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(o,i,r){return this[s].call(this,t,o,i,r)},configurable:!0})})}class Ae{constructor(t){t&&this.set(t)}set(t,n,s){const o=this;function i(c,l,u){const f=pe(l);if(!f)throw new Error("header name must be a non-empty string");const p=a.findKey(o,f);(!p||o[p]===void 0||u===!0||u===void 0&&o[p]!==!1)&&(o[p||l]=Se(c))}const r=(c,l)=>a.forEach(c,(u,f)=>i(u,f,l));return a.isPlainObject(t)||t instanceof this.constructor?r(t,n):a.isString(t)&&(t=t.trim())&&!is(t)?r(rs(t),n):t!=null&&i(n,t,s),this}get(t,n){if(t=pe(t),t){const s=a.findKey(this,t);if(s){const o=this[s];if(!n)return o;if(n===!0)return os(o);if(a.isFunction(n))return n.call(this,o,s);if(a.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=pe(t),t){const s=a.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Me(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let o=!1;function i(r){if(r=pe(r),r){const c=a.findKey(s,r);c&&(!n||Me(s,s[c],c,n))&&(delete s[c],o=!0)}}return a.isArray(t)?t.forEach(i):i(t),o}clear(t){const n=Object.keys(this);let s=n.length,o=!1;for(;s--;){const i=n[s];(!t||Me(this,this[i],i,t,!0))&&(delete this[i],o=!0)}return o}normalize(t){const n=this,s={};return a.forEach(this,(o,i)=>{const r=a.findKey(s,i);if(r){n[r]=Se(o),delete n[i];return}const c=t?as(i):String(i).trim();c!==i&&delete n[i],n[c]=Se(o),s[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return a.forEach(this,(s,o)=>{s!=null&&s!==!1&&(n[o]=t&&a.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(o=>s.set(o)),s}static accessor(t){const s=(this[it]=this[it]={accessors:{}}).accessors,o=this.prototype;function i(r){const c=pe(r);s[c]||(ls(o,r),s[c]=!0)}return a.isArray(t)?t.forEach(i):i(t),this}}Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);a.freezeMethods(Ae.prototype);a.freezeMethods(Ae);const K=Ae;function Fe(e,t){const n=this||Xe,s=t||n,o=K.from(s.headers);let i=s.data;return a.forEach(e,function(c){i=c.call(n,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function Mt(e){return!!(e&&e.__CANCEL__)}function be(e,t,n){w.call(this,e??"canceled",w.ERR_CANCELED,t,n),this.name="CanceledError"}a.inherits(be,w,{__CANCEL__:!0});function cs(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new w("Request failed with status code "+n.status,[w.ERR_BAD_REQUEST,w.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const us=z.isStandardBrowserEnv?function(){return{write:function(n,s,o,i,r,c){const l=[];l.push(n+"="+encodeURIComponent(s)),a.isNumber(o)&&l.push("expires="+new Date(o).toGMTString()),a.isString(i)&&l.push("path="+i),a.isString(r)&&l.push("domain="+r),c===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){const s=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function hs(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fs(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Ft(e,t){return e&&!hs(t)?fs(e,t):t}const ps=z.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let s;function o(i){let r=i;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return s=o(window.location.href),function(r){const c=a.isString(r)?o(r):r;return c.protocol===s.protocol&&c.host===s.host}}():function(){return function(){return!0}}();function ds(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function ys(e,t){e=e||10;const n=new Array(e),s=new Array(e);let o=0,i=0,r;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),f=s[i];r||(r=u),n[o]=l,s[o]=u;let p=i,E=0;for(;p!==o;)E+=n[p++],p=p%e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),u-r<t)return;const d=f&&u-f;return d?Math.round(E*1e3/d):void 0}}function at(e,t){let n=0;const s=ys(50,250);return o=>{const i=o.loaded,r=o.lengthComputable?o.total:void 0,c=i-n,l=s(c),u=i<=r;n=i;const f={loaded:i,total:r,progress:r?i/r:void 0,bytes:c,rate:l||void 0,estimated:l&&r&&u?(r-i)/l:void 0,event:o};f[t?"download":"upload"]=!0,e(f)}}const ms=typeof XMLHttpRequest<"u",gs=ms&&function(e){return new Promise(function(n,s){let o=e.data;const i=K.from(e.headers).normalize(),r=e.responseType;let c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}a.isFormData(o)&&(z.isStandardBrowserEnv||z.isStandardBrowserWebWorkerEnv)&&i.setContentType(!1);let u=new XMLHttpRequest;if(e.auth){const d=e.auth.username||"",h=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(d+":"+h))}const f=Ft(e.baseURL,e.url);u.open(e.method.toUpperCase(),At(f,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function p(){if(!u)return;const d=K.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),y={data:!r||r==="text"||r==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:d,config:e,request:u};cs(function(k){n(k),l()},function(k){s(k),l()},y),u=null}if("onloadend"in u?u.onloadend=p:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(p)},u.onabort=function(){!u||(s(new w("Request aborted",w.ECONNABORTED,e,u)),u=null)},u.onerror=function(){s(new w("Network Error",w.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let h=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const y=e.transitional||Ct;e.timeoutErrorMessage&&(h=e.timeoutErrorMessage),s(new w(h,y.clarifyTimeoutError?w.ETIMEDOUT:w.ECONNABORTED,e,u)),u=null},z.isStandardBrowserEnv){const d=(e.withCredentials||ps(f))&&e.xsrfCookieName&&us.read(e.xsrfCookieName);d&&i.set(e.xsrfHeaderName,d)}o===void 0&&i.setContentType(null),"setRequestHeader"in u&&a.forEach(i.toJSON(),function(h,y){u.setRequestHeader(y,h)}),a.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),r&&r!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",at(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",at(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=d=>{!u||(s(!d||d.type?new be(null,e,u):d),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const E=ds(f);if(E&&z.protocols.indexOf(E)===-1){s(new w("Unsupported protocol "+E+":",w.ERR_BAD_REQUEST,e));return}u.send(o||null)})},Oe={http:zn,xhr:gs};a.forEach(Oe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const bs={getAdapter:e=>{e=a.isArray(e)?e:[e];const{length:t}=e;let n,s;for(let o=0;o<t&&(n=e[o],!(s=a.isString(n)?Oe[n.toLowerCase()]:n));o++);if(!s)throw s===!1?new w(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(a.hasOwnProp(Oe,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!a.isFunction(s))throw new TypeError("adapter is not a function");return s},adapters:Oe};function Ue(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new be(null,e)}function lt(e){return Ue(e),e.headers=K.from(e.headers),e.data=Fe.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bs.getAdapter(e.adapter||Xe.adapter)(e).then(function(s){return Ue(e),s.data=Fe.call(e,e.transformResponse,s),s.headers=K.from(s.headers),s},function(s){return Mt(s)||(Ue(e),s&&s.response&&(s.response.data=Fe.call(e,e.transformResponse,s.response),s.response.headers=K.from(s.response.headers))),Promise.reject(s)})}const ct=e=>e instanceof K?e.toJSON():e;function ae(e,t){t=t||{};const n={};function s(u,f,p){return a.isPlainObject(u)&&a.isPlainObject(f)?a.merge.call({caseless:p},u,f):a.isPlainObject(f)?a.merge({},f):a.isArray(f)?f.slice():f}function o(u,f,p){if(a.isUndefined(f)){if(!a.isUndefined(u))return s(void 0,u,p)}else return s(u,f,p)}function i(u,f){if(!a.isUndefined(f))return s(void 0,f)}function r(u,f){if(a.isUndefined(f)){if(!a.isUndefined(u))return s(void 0,u)}else return s(void 0,f)}function c(u,f,p){if(p in t)return s(u,f);if(p in e)return s(void 0,u)}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:c,headers:(u,f)=>o(ct(u),ct(f),!0)};return a.forEach(Object.keys(e).concat(Object.keys(t)),function(f){const p=l[f]||o,E=p(e[f],t[f],f);a.isUndefined(E)&&p!==c||(n[f]=E)}),n}const Ut="1.3.4",Ye={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ye[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ut={};Ye.transitional=function(t,n,s){function o(i,r){return"[Axios v"+Ut+"] Transitional option '"+i+"'"+r+(s?". "+s:"")}return(i,r,c)=>{if(t===!1)throw new w(o(r," has been removed"+(n?" in "+n:"")),w.ERR_DEPRECATED);return n&&!ut[r]&&(ut[r]=!0,console.warn(o(r," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,r,c):!0}};function ws(e,t,n){if(typeof e!="object")throw new w("options must be an object",w.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let o=s.length;for(;o-- >0;){const i=s[o],r=t[i];if(r){const c=e[i],l=c===void 0||r(c,i,e);if(l!==!0)throw new w("option "+i+" must be "+l,w.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new w("Unknown option "+i,w.ERR_BAD_OPTION)}}const $e={assertOptions:ws,validators:Ye},Z=$e.validators;class Pe{constructor(t){this.defaults=t,this.interceptors={request:new ot,response:new ot}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=ae(this.defaults,n);const{transitional:s,paramsSerializer:o,headers:i}=n;s!==void 0&&$e.assertOptions(s,{silentJSONParsing:Z.transitional(Z.boolean),forcedJSONParsing:Z.transitional(Z.boolean),clarifyTimeoutError:Z.transitional(Z.boolean)},!1),o!==void 0&&$e.assertOptions(o,{encode:Z.function,serialize:Z.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let r;r=i&&a.merge(i.common,i[n.method]),r&&a.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),n.headers=K.concat(r,i);const c=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(l=l&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let f,p=0,E;if(!l){const h=[lt.bind(this),void 0];for(h.unshift.apply(h,c),h.push.apply(h,u),E=h.length,f=Promise.resolve(n);p<E;)f=f.then(h[p++],h[p++]);return f}E=c.length;let d=n;for(p=0;p<E;){const h=c[p++],y=c[p++];try{d=h(d)}catch(O){y.call(this,O);break}}try{f=lt.call(this,d)}catch(h){return Promise.reject(h)}for(p=0,E=u.length;p<E;)f=f.then(u[p++],u[p++]);return f}getUri(t){t=ae(this.defaults,t);const n=Ft(t.baseURL,t.url);return At(n,t.params,t.paramsSerializer)}}a.forEach(["delete","get","head","options"],function(t){Pe.prototype[t]=function(n,s){return this.request(ae(s||{},{method:t,url:n,data:(s||{}).data}))}});a.forEach(["post","put","patch"],function(t){function n(s){return function(i,r,c){return this.request(ae(c||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:r}))}}Pe.prototype[t]=n(),Pe.prototype[t+"Form"]=n(!0)});const Re=Pe;class Qe{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(o=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](o);s._listeners=null}),this.promise.then=o=>{let i;const r=new Promise(c=>{s.subscribe(c),i=c}).then(o);return r.cancel=function(){s.unsubscribe(i)},r},t(function(i,r,c){s.reason||(s.reason=new be(i,r,c),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Qe(function(o){t=o}),cancel:t}}}const _s=Qe;function Es(e){return function(n){return e.apply(null,n)}}function Ss(e){return a.isObject(e)&&e.isAxiosError===!0}const ze={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ze).forEach(([e,t])=>{ze[t]=e});const Os=ze;function Dt(e){const t=new Re(e),n=wt(Re.prototype.request,t);return a.extend(n,Re.prototype,t,{allOwnKeys:!0}),a.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return Dt(ae(e,o))},n}const v=Dt(Xe);v.Axios=Re;v.CanceledError=be;v.CancelToken=_s;v.isCancel=Mt;v.VERSION=Ut;v.toFormData=ve;v.AxiosError=w;v.Cancel=v.CanceledError;v.all=function(t){return Promise.all(t)};v.spread=Es;v.isAxiosError=Ss;v.mergeConfig=ae;v.AxiosHeaders=K;v.formToJSON=e=>It(a.isHTMLForm(e)?new FormData(e):e);v.HttpStatusCode=Os;v.default=v;const Bt=v,{namedNode:se}=Vt,Rs=e=>`PREFIX geo: <http://www.opengis.net/ont/geosparql#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX prez: <https://prez.dev/>

CONSTRUCT {?ds a <${e.spatial.datasetClass}> ;
    <${e.props.dsLabel}> ?ds_title ;
    <${e.spatial.membershipRelationship}> ?fc .
  ?fc a geo:FeatureCollection ;
  <${e.props.fcLabel}> ?fc_title}
WHERE {<https://prez.dev/DatasetList> <${e.spatial.membershipRelationship}> ?ds.
  ?ds <${e.spatial.membershipRelationship}> ?fc ;
      <${e.props.dsLabel}> ?ds_title .
  ?fc <${e.props.fcLabel}> ?fc_title
      }`,De=e=>({subject:e.subject.id,predicate:e.predicate.id,object:Gt(e.object)?e.object.value:e.object.id}),Ps=ft({id:"datasetsStore",state:()=>{const e=Te(ye(Je)),t=ye(pt);return{data:[],success:!1,store:new Ze,loading:!1,error:null,apiBaseUrl:t,mapConfig:e}},actions:{getMatchedData(e){const t=[],{subject:n=null,predicate:s=null,object:o=null}=e;for(const i of this.store.match(n,s,o))t.push(De(i));return t},getDatasetTree(){const e=[];return this.getDatasets().forEach(t=>{e.push({item:t,featureCollections:this.getFeatureCollections([t.subject])})}),e},getDatasets(){let e=[];return this.getMatchedData({object:se(this.mapConfig.search.spatial.datasetClass)}).forEach(n=>{for(const s of this.store.match(se(n.subject),se(this.mapConfig.search.props.dsLabel)))e.push(De(s))}),e},getFeatureCollections(e){if(e.length==0)return[];{let t=[];return e.forEach(n=>{this.getMatchedData({predicate:se(this.mapConfig.search.spatial.membershipRelationship),subject:se(n)}).forEach(o=>{for(const i of this.store.match(se(o.object),se(this.mapConfig.search.props.fcLabel)))t.push(De(i))})}),t}},async fetchSpacePrezData(){return await this.fetchData(`${this.apiBaseUrl}/s/sparql`,Rs(this.mapConfig.search))},async fetchData(e,t){try{const n=new Ht;this.loading=!0,this.success=!1;const s=await Bt.get(e,{params:{query:t}});this.data=n.parse(s.data),this.store=new Ze(this.data),this.success=!0,this.error=null}catch(n){this.error=n.message,this.success=!1}finally{this.loading=!1}}}}),ks={class:"button-container"},Ns=["onClick"],Ts=ke({__name:"ButtonGroup",props:{buttons:{type:Array,required:!0},allowMultipleSelection:{type:Boolean,default:!1}},emits:["change"],setup(e,{emit:t}){const n=e,s=D([]);function o(r){n.allowMultipleSelection?s.value.includes(r)?s.value=s.value.filter(l=>l!==r):s.value.push(r):s.value=[r],t("change",i.value)}const i=Wt(()=>s.value.map(r=>n.buttons[r].value));return(r,c)=>(N(),x("div",ks,[(N(!0),x(ie,null,_e(e.buttons,(l,u)=>(N(),x("div",{key:u,onClick:f=>o(u),class:Kt(["btn sm",{outline:!s.value.includes(u)}])},W(l.text),11,Ns))),128))]))}});const xs=dt(Ts,[["__scopeId","data-v-63ce5e90"]]),vs="/s/object?uri=",Ls=ft({id:"mapSearchStore",state:()=>{const e=ye(pt);return{data:[],success:!1,loading:!1,error:null,apiBaseUrl:e}},actions:{async searchMap(e){const t=`${this.apiBaseUrl}/s/sparql`,n=await Bt.get(t,{headers:{accept:"application/sparql-results+json"},params:{query:e}});this.loading=!0,this.success=!1;try{this.data=n.data.results.bindings.filter(s=>s.fc_label?.value).map(s=>({uri:s.f_uri.value,link:`${vs}${s.f_uri.value}`,wkt:s.wkt.value,fcLabel:s.fc_label?.value,label:s.f_label.value,id:s.o.value}))}catch(s){this.error=s.message,this.success=!1}finally{this.loading=!1}this.success=!0,this.error=null}}}),J=e=>(Xt("data-v-a0fec289"),e=e(),Yt(),e),As={class:"container"},Cs={class:"left-panel"},Is={action:"",class:"query-options"},Ms={class:"query-option"},Fs=J(()=>m("h4",{class:"query-option-title"},"Search map selection",-1)),Us={class:"btn sm outline"},Ds=J(()=>m("p",null,null,-1)),Bs={key:0},js=J(()=>m("p",null,null,-1)),$s={key:2,style:{"padding-top":"10px","font-size":"0.7em"}},zs=J(()=>m("p",null,null,-1)),Js={class:"query-option"},qs=J(()=>m("h4",{class:"query-option-title"},"Find features and datasets",-1)),Hs={key:0},Vs={key:1,class:"error"},Gs=["value","onChange"],Ws={key:0},Ks=["value"],Xs=J(()=>m("p",null,null,-1)),Ys={class:"nowrap"},Qs={class:"nowrap"},Zs={class:"space-right"},er=["disabled"],tr={class:"right-panel"},nr={key:0},sr=J(()=>m("h3",null,"Result set",-1)),rr=J(()=>m("thead",null,[m("th",null,"Feature collection"),m("th",null,"Label"),m("th",null,"URI")],-1)),or=["href"],ir={key:1},ar=J(()=>m("h3",null,"No results",-1)),lr=[ar],cr={key:0,class:"debug"},ur=J(()=>m("b",null,"SPARQL query:",-1)),hr=ke({__name:"SpacePrezSearchMap",setup(e){const t=Te(ye(Je)),n=Ps(),s=Ls(),o=D([]),i=D([]),r=D([]),c=D(),l=D($.None),u=D([]),f=D(ee.Nearby),p=D(5),E=D(10),d=D(!1),h=D(""),y=D(),O=async()=>{h.value=nn(r.value,u.value,f.value,p.value,E.value,t.search),await s.searchMap(h.value),s.success&&(y.value=s.data,c.value.drawShape(s.data))},k=async()=>{await n.fetchSpacePrezData(),n.success&&(o.value=n.getDatasetTree())};yt(async()=>{await k(),o.value.forEach(L=>{i.value.push(L.item.subject),L.featureCollections.forEach(b=>{r.value.push(b.subject)})})});const B=async(L,b)=>{l.value=b,u.value=L,await O()},R=tn(ee),C=async L=>{f.value=L[0],await O()},T=async(L,b)=>(b?L.featureCollections.forEach(_=>{r.value.includes(_.subject)||r.value.push(_.subject)}):L.featureCollections.forEach(_=>{const P=r.value.indexOf(_.subject);P>=0&&r.value.splice(P,1)}),await O(),!0);return(L,b)=>(N(),x(ie,null,[m("div",As,[m("div",Cs,[m("form",Is,[m("div",Ms,[Fs,m("div",Us,W(l.value),1),Ds,l.value==U($).None?(N(),x("div",Bs,"Select a point or rectangle on the map to begin")):ne("",!0),js,l.value!=U($).None?(N(),ht(xs,{key:1,onChange:C,buttons:U(R),allowMultipleSelection:!1},null,8,["buttons"])):ne("",!0),l.value!=U($).None&&f.value==U(ee).Nearby?(N(),x("div",$s,[H(" within "),ue(m("input",{class:"small-input","onUpdate:modelValue":b[0]||(b[0]=_=>p.value=_)},null,512),[[et,p.value]]),H(" km ")])):ne("",!0),zs]),m("div",Js,[qs,U(n).loading?(N(),x("div",Hs,"Loading...")):U(n).error?(N(),x("div",Vs,"Unable to load datasets: "+W(U(n).error),1)):ne("",!0),(N(!0),x(ie,null,_e(o.value,_=>(N(),x("div",null,[m("ul",null,[m("li",null,[m("label",null,[ue(m("input",{type:"checkbox",value:_.item.subject,"onUpdate:modelValue":b[1]||(b[1]=P=>i.value=P),onChange:P=>T(_,P.target?.checked)},null,40,Gs),[[Ce,i.value]]),H(" "+W(_.item.object),1)]),_.featureCollections.length>0?(N(),x("ul",Ws,[(N(!0),x(ie,null,_e(_.featureCollections,P=>(N(),x("li",null,[m("label",null,[ue(m("input",{type:"checkbox",value:P.subject,"onUpdate:modelValue":b[2]||(b[2]=Y=>r.value=Y),onChange:b[3]||(b[3]=Y=>O())},null,40,Ks),[[Ce,r.value]]),H(W(P.object),1)])]))),256))])):ne("",!0)])])]))),256))]),Xs,m("span",Ys,[H("Results limit: "),ue(m("input",{id:"input-limit",class:"space-right",onChange:b[4]||(b[4]=_=>O()),"onUpdate:modelValue":b[5]||(b[5]=_=>E.value=_)},null,544),[[et,E.value]])]),m("span",Qs,[m("label",Zs,[ue(m("input",{"onUpdate:modelValue":b[6]||(b[6]=_=>d.value=_),type:"checkbox"},null,512),[[Ce,d.value]]),H("Show query")])]),m("button",{onClick:O,disabled:l.value==U($).None,class:"btn",type:"submit"},"Search",8,er)])]),m("div",tr,[mt(un,{ref_key:"searchMapRef",ref:c,"geo-w-k-t":y.value,"drawing-modes":["MARKER","POLYGON","RECTANGLE"],onSelectionUpdated:B},null,8,["geo-w-k-t"]),U(s).data&&U(s).data.length>0?(N(),x("div",nr,[sr,m("table",null,[rr,m("tbody",null,[(N(!0),x(ie,null,_e(U(s).data,_=>(N(),x("tr",null,[m("td",null,W(_.fcLabel),1),m("td",null,W(_.label),1),m("td",null,[m("a",{href:`${_.link}`},W(_.uri),9,or)])]))),256))])])])):(N(),x("div",ir,lr))])]),d.value?(N(),x("pre",cr,[H(`
`),ur,H(`

`+W(h.value)+`

`,1),ne("",!0),H(`

`)])):ne("",!0)],64))}});const fr=dt(hr,[["__scopeId","data-v-a0fec289"]]),pr=m("h1",null,"SpacePrez Home",-1),dr=m("p",null,"Welcome to SpacePrez",-1),mr=ke({__name:"SpacePrezHomeView",setup(e){const t=Qt();return yt(()=>{t.rightNavConfig={enabled:!1},document.title="SpacePrez | Prez",t.pageHeading={name:"SpacePrez",url:"/s"},t.breadcrumbs=[{name:"SpacePrez",url:"/s"}]}),(n,s)=>(N(),x(ie,null,[pr,dr,mt(fr)],64))}});export{mr as default};
