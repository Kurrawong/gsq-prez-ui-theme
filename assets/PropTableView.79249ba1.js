import{_ as z,h as l,c as i,n as Z,a as t,d as U,e as j,w as I,q as g,t as m,F as b,Q as ve,r as M,S as Fe,U as Oe,P as he,f as T,b as P,p as Y,j as q,m as N,V as fe,x as w,o as Me,i as re,W as Ue,k as ne,y as nt,G as pe,R as it,O as ze,L as ct,u as ut,v as Ae,s as de,M as dt,X as pt,T as De,B as vt,Y as ht,l as ft,Z as Be,$ as _t,D as bt}from"./index.e4d92927.js";import{c as Ve,e as mt,t as gt}from"./helpers.6e404483.js";import{A as kt}from"./AdvancedSearch.2815feb0.js";import{P as yt,S as Ct}from"./SortableTabularList.ca09465f.js";import{E as $t,L as wt}from"./LoadingMessage.480e75a7.js";import{_ as jt}from"./MapClient.vue_vue_type_script_setup_true_lang.a8bcbffb.js";import{B as We}from"./BaseModal.4174d6d8.js";const Pt={},St={class:"tooltip"},xt={class:"tooltip-text"};function Tt(p,e){return l(),i("span",St,[Z(p.$slots,"default",{},void 0,!0),t("span",xt,[Z(p.$slots,"text",{},void 0,!0)])])}const _e=z(Pt,[["render",Tt],["__scopeId","data-v-5b46f6b0"]]),It=["href"],Et=U({__name:"PredCell",props:{iri:null,qname:null,label:null,description:null,explanation:null},setup(p){const e=p;return(n,y)=>(l(),i("th",null,[(l(),j(ve(e.description?_e:"slot"),null,{text:I(()=>[g(m(e.description),1)]),default:I(()=>[t("a",{href:e.iri,target:"_blank",rel:"noopener noreferrer"},[e.label?(l(),i(b,{key:0},[g(m(e.label),1)],64)):e.qname?(l(),i(b,{key:1},[g(m(e.qname),1)],64)):(l(),i(b,{key:2},[g(m(e.iri),1)],64))],8,It)]),_:1}))]))}}),Rt=p=>(Y("data-v-1f5b66bd"),p=p(),q(),p),Nt={class:"prop-obj"},Lt={class:"obj-value"},At={key:0},Dt=["href"],Bt=["href"],Ft={key:2,class:"geom-cell"},Ot=Rt(()=>t("i",{class:"fa-regular fa-clipboard"},null,-1)),Mt=[Ot],Ut={class:"obj-tag"},zt={key:0,class:"badge outline",title:"Language"},Vt=["href"],Wt=U({__name:"ObjCell",props:{predIri:null,value:null,qname:null,datatype:null,language:null,description:null,explanation:null,termType:null,label:null,rows:null},setup(p){const e=p,n=["http://www.opengis.net/ont/geosparql#geoJSONLiteral","http://www.opengis.net/ont/geosparql#wktLiteral"],y=100;return(S,s)=>(l(),i("div",Nt,[t("div",Lt,[e.termType==="BlankNode"?(l(),i("table",At,[(l(!0),i(b,null,M(e.rows,k=>(l(),j(Ge,Fe(Oe(k)),null,16))),256))])):e.termType==="NamedNode"?(l(),j(ve(e.description?_e:"slot"),{key:1},{text:I(()=>[g(m(e.description),1)]),default:I(()=>[t("a",{href:e.value,target:"_blank",rel:"noopener noreferrer"},[e.label?(l(),i(b,{key:0},[g(m(e.label),1)],64)):e.qname?(l(),i(b,{key:1},[g(m(e.qname),1)],64)):(l(),i(b,{key:2},[g(m(e.value),1)],64))],8,Dt)]),_:1})):(l(),i(b,{key:2},[e.predIri==="https://schema.org/color"?(l(),i(b,{key:0},[g(m(e.value),1),e.value?(l(),i("span",{key:0,style:he({color:e.value,marginLeft:"4px"}),class:"fa-solid fa-circle fa-2xs"},null,4)):T("",!0)],64)):e.value.startsWith("http")?(l(),i("a",{key:1,href:e.value,target:"_blank",rel:"noopener noreferrer"},m(e.value),9,Bt)):e.datatype&&n.includes(e.datatype.value)?(l(),i("div",Ft,[t("pre",null,m(e.value.length>y?`${e.value.slice(0,y)}...`:e.value),1),t("button",{class:"btn outline sm",title:"Copy geometry",onClick:s[0]||(s[0]=k=>P(Ve)(e.value))},Mt)])):(l(),i(b,{key:3},[g(m(e.value),1)],64))],64))]),t("div",Ut,[e.language?(l(),i("span",zt,m(e.language),1)):e.datatype?(l(),i("a",{key:1,href:e.datatype.value,target:"_blank",rel:"noopener noreferrer",class:"badge outline",title:"Datatype"},[e.datatype.qname?(l(),i(b,{key:0},[g(m(e.datatype.qname),1)],64)):(l(),i(b,{key:1},[g(m(e.datatype.value),1)],64))],8,Vt)):T("",!0)])]))}});const Gt=z(Wt,[["__scopeId","data-v-1f5b66bd"]]),Qt={class:"prop-objs"},Kt=U({__name:"PropRow",props:{iri:null,objs:null,qname:null,label:null,description:null,explanation:null,order:null},setup(p){const e=p;return(n,y)=>(l(),i("tr",null,[N(Et,{iri:e.iri,qname:e.qname,label:e.label,description:e.description,explanation:e.explanation},null,8,["iri","qname","label","description","explanation"]),t("td",Qt,[(l(!0),i(b,null,M(e.objs,S=>(l(),j(Gt,fe(S,{predIri:e.iri}),null,16,["predIri"]))),256))])]))}});const Ge=z(Kt,[["__scopeId","data-v-55f7ed32"]]),be=p=>(Y("data-v-93deaa9f"),p=p(),q(),p),Ht={class:"page-title"},Xt={class:"iri"},Jt=be(()=>t("span",{class:"badge"},"IRI",-1)),Zt=["href"],Yt=be(()=>t("i",{class:"fa-regular fa-clipboard"},null,-1)),qt=[Yt],el={class:"type"},tl=be(()=>t("span",{class:"badge"},"Type",-1)),ll={class:"types"},al=["href"],sl={key:0},ol={key:0},rl=U({__name:"PropTable",props:{item:null,properties:null,blankNodes:null,prefixes:null,hiddenPreds:null},setup(p){const e=p,n=w([]);function y(f){let $="";return Object.entries(e.prefixes).forEach(([c,a])=>{f.startsWith(a)&&($=c+":"+f.split(a)[1])}),$}function S(f){if(f==="a")return e.prefixes.rdf+"type";{const[$,c]=f.split(":");return e.prefixes[$]+c}}function s(f,$){return f.annotations.find(c=>c.predicate.value===S($))?.object.value}function k(f){let $={};return f.forEach(c=>{var a;$[a=c.predicate.value]??($[a]={iri:c.predicate.value,objs:[],qname:y(c.predicate.value),label:s(c.predicate,"rdfs:label"),description:s(c.predicate,"dcterms:description"),explanation:s(c.predicate,"dcterms:provenance"),order:0}),$[c.predicate.value].objs.push({predIri:c.predicate.value,value:c.object.value,qname:c.object.termType==="NamedNode"?y(c.object.value):void 0,datatype:c.object.termType==="Literal"?{value:c.object.datatype.value,qname:y(c.object.datatype.value)}:void 0,language:c.object.termType==="Literal"?c.object.language:void 0,termType:c.object.termType,label:s(c.object,"rdfs:label"),description:s(c.object,"dcterms:description"),explanation:s(c.object,"dcterms:provenance"),rows:c.object.termType==="BlankNode"?k(e.blankNodes.filter(H=>H.subject.id===c.object.id)):[]})}),Object.values($).sort((c,a)=>c.order-a.order)}return Me(()=>{const f=e.properties.filter($=>!e.hiddenPreds.includes($.predicate.value));n.value=k(f)}),(f,$)=>(l(),i(b,null,[t("h1",Ht,[g(m(e.item.title||e.item.iri)+" ",1),t("small",Xt,[Jt,t("a",{href:e.item.iri,target:"_blank",rel:"noopener noreferrer"},m(e.item.iri),9,Zt),t("button",{class:"btn outline sm",title:"Copy IRI",onClick:$[0]||($[0]=c=>P(Ve)(e.item.iri))},qt)]),t("small",el,[tl,t("div",ll,[(l(!0),i(b,null,M(e.item.types,(c,a)=>(l(),i(b,null,[(l(),j(ve(c.description?_e:"slot"),null,{text:I(()=>[g(m(c.description),1)]),default:I(()=>[t("a",{href:c.value,target:"_blank",rel:"noopener noreferrer"},[c.label?(l(),i(b,{key:0},[g(m(c.label),1)],64)):c.qname?(l(),i(b,{key:1},[g(m(c.qname),1)],64)):(l(),i(b,{key:2},[g(m(c.value),1)],64))],8,al)]),_:2},1024)),a<e.item.types.length-1?(l(),i("span",sl,", ")):T("",!0)],64))),256))])])]),Z(f.$slots,"map",{},void 0,!0),e.item.description?(l(),i("p",ol,[t("em",null,m(e.item.description),1)])):T("",!0),t("table",null,[Z(f.$slots,"top",{},void 0,!0),(l(!0),i(b,null,M(n.value,c=>(l(),j(Ge,Fe(Oe(c)),null,16))),256)),Z(f.$slots,"bottom",{},void 0,!0)])],64))}});const nl=z(rl,[["__scopeId","data-v-93deaa9f"]]),il={class:"concept-top"},cl={key:1,class:"concept-left"},ul=U({__name:"ConceptComponent",props:{iri:null,title:null,link:null,childrenCount:null,children:null,narrower:null,broader:null,color:null,baseUrl:null,collapseAll:{type:Boolean},parentPath:null,doNarrowerEmits:{type:Boolean}},emits:["getNarrowers"],setup(p,{emit:e}){const n=p,y=re(Ue),S=w(!0),s=ne(()=>n.parentPath===""?n.iri:`${n.parentPath}|${n.iri}`);nt(()=>n.collapseAll,($,c)=>{S.value=$});function k(){S.value&&n.children.length===0&&n.childrenCount>0&&n.doNarrowerEmits&&e("getNarrowers",{iriPath:s.value,link:n.link,page:1}),S.value=!S.value}function f(){e("getNarrowers",{iriPath:s.value,link:n.link,page:Math.round(n.children.length/y)+1})}return($,c)=>{const a=ze("ConceptComponent",!0);return l(),i(b,null,[t("div",il,[n.childrenCount>0?(l(),i("button",{key:0,class:"concept-left btn outline",onClick:k},[t("i",{class:pe(`fa-regular fa-${S.value?"plus":"minus"}`)},null,2)])):(l(),i("div",cl)),N(P(it),{class:"concept",to:n.link},{default:I(()=>[g(m(n.title||n.iri),1)]),_:1},8,["to"]),g(),n.color?(l(),i("span",{key:2,style:he({color:n.color}),class:"fa-solid fa-circle fa-2xs"},null,4)):T("",!0)]),n.childrenCount>0?(l(),i("div",{key:0,class:pe(`concept-children ${S.value?"collapse":""}`)},[(l(!0),i(b,null,M(n.children,H=>(l(),j(a,fe(H,{baseUrl:n.baseUrl,collapseAll:n.collapseAll,parentPath:P(s),onGetNarrowers:c[0]||(c[0]=G=>e("getNarrowers",G)),doNarrowerEmits:n.doNarrowerEmits}),null,16,["baseUrl","collapseAll","parentPath","doNarrowerEmits"]))),256)),n.children.length>0&&n.childrenCount>n.children.length&&n.doNarrowerEmits?(l(),i("button",{key:0,class:"btn outline sm",onClick:f,style:{marginLeft:"26px"}}," Load more ")):T("",!0)],2)):T("",!0)],64)}}});const dl=z(ul,[["__scopeId","data-v-c72dbd42"]]),pl={class:"circle-overlay"},vl={class:"circle-value"},hl={key:1,class:"fa-solid fa-check"},fl=U({__name:"CircleProgress",props:{value:null,max:null,percentage:null,label:null,tickWhenComplete:{type:Boolean},gradient:{type:Boolean}},setup(p){const e=p,n=ne(()=>e.value!==void 0&&e.max!==void 0?e.value/e.max*100:e.percentage!==void 0?e.percentage:0),y=ne(()=>n.value<34?"230, 0, 0":n.value<=80?"255, 165, 0":n.value<100?"175, 230, 0":n.value==100?"0, 230, 38":"128, 128, 128"),S=ne(()=>`${n.value===100?130:75*n.value/100}, 100%, 45%`);return(s,k)=>(l(),i("div",{class:pe("circle-progress"),style:he({background:`conic-gradient(${e.gradient?`hsl(${P(S)}`:`rgb(${P(y)}`}) ${P(n)}%, 0, ${e.gradient?`hsla(${P(S)}`:`rgba(${P(y)}`}, 0.2) ${100-P(n)}%)`})},[t("div",pl,[t("span",vl,[e.label?(l(),i(b,{key:0},[g(m(e.label),1)],64)):e.tickWhenComplete&&P(n)===100?(l(),i("i",hl)):e.value!==void 0&&e.max!==void 0?(l(),i(b,{key:2},[g(m(e.value)+"/"+m(e.max),1)],64)):e.percentage!==void 0?(l(),i(b,{key:3},[g(m(e.percentage)+"%",1)],64)):T("",!0)])])],4))}});const O=z(fl,[["__scopeId","data-v-90bfb0c3"]]),L=p=>(Y("data-v-f7fa04e6"),p=p(),q(),p),_l={class:"fair-scores"},bl={class:"score-title"},ml=L(()=>t("h5",null,"FAIR Score",-1)),gl=L(()=>t("i",{class:"fa-regular fa-circle-info"},null,-1)),kl=[gl],yl={class:"circles"},Cl={class:"circle"},$l={class:"circle-name"},wl=L(()=>t("h3",null,"FAIR Scores",-1)),jl=L(()=>t("p",null,[g("In 2016, the "),t("a",{href:"https://doi.org/10.1038/sdata.2016.18",target:"_blank",rel:"noopener noreferrer"},"'FAIR Guiding Principles for scientific data management and stewardship'"),g(" were published in the open-access journal, Scientific Data. The authors intended to provide guidelines to improve the Findability, Accessibility, Interoperability, and Reuse of digital assets.")],-1)),Pl=L(()=>t("p",null,[g("The principles are set out in full on the "),t("a",{href:"https://www.go-fair.org/fair-principles/",target:"_blank",rel:"noopener noreferrer"},"GO FAIR website"),g(". ARDC also offers comprehensive "),t("a",{href:"https://ardc.edu.au/resource/fair-data/",target:"_blank",rel:"noopener noreferrer"},"information and training"),g(". The FAIR Principles refer to three types of entities: data, metadata and infrastructure. ")],-1)),Sl={class:"score-details"},xl={class:"score-detail"},Tl={class:"score-detail-title"},Il=L(()=>t("h4",null,"F - Findable",-1)),El=L(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Metadata and data should be easy to find for both humans and computers.")],-1)),Rl={class:"score-detail"},Nl={class:"score-detail-title"},Ll=L(()=>t("h4",null,"A - Accessible",-1)),Al=L(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Once data is found, access information needs to be clearly indicated on the metadata.")],-1)),Dl={class:"score-detail"},Bl={class:"score-detail-title"},Fl=L(()=>t("h4",null,"I - Interoperable",-1)),Ol=L(()=>t("div",{class:"score-detail-desc"},[t("p",null,"The data should be able to be integrated with other data.")],-1)),Ml={class:"score-detail"},Ul={class:"score-detail-title"},zl=L(()=>t("h4",null,"R - Reusable",-1)),Vl=L(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Metadata and data should be well-described so that they can be replicated and/or combined in different settings.")],-1)),Wl=U({__name:"FairScore",props:{score:null},setup(p){const e=p,n={f:17,a:10,i:8,r:7},y=w(!1);return(S,s)=>(l(),i(b,null,[t("div",_l,[t("div",bl,[ml,t("button",{class:"btn outline",onClick:s[0]||(s[0]=k=>y.value=!0),title:"Show details"},kl)]),t("div",yl,[(l(),i(b,null,M("fair",k=>t("div",Cl,[N(O,{value:e.score[k],max:n[k],tickWhenComplete:""},null,8,["value","max"]),t("div",$l,m(k.toUpperCase()),1)])),64))])]),y.value?(l(),j(We,{key:0,onModalClosed:s[1]||(s[1]=k=>y.value=!1)},{headerMiddle:I(()=>[wl]),default:I(()=>[jl,Pl,t("div",Sl,[t("div",xl,[t("div",Tl,[N(O,{value:e.score.f,max:n.f},null,8,["value","max"]),Il]),El]),t("div",Rl,[t("div",Nl,[N(O,{value:e.score.a,max:n.a},null,8,["value","max"]),Ll]),Al]),t("div",Dl,[t("div",Bl,[N(O,{value:e.score.i,max:n.i},null,8,["value","max"]),Fl]),Ol]),t("div",Ml,[t("div",Ul,[N(O,{value:e.score.r,max:n.r},null,8,["value","max"]),zl]),Vl])])]),_:1})):T("",!0)],64))}});const Gl=z(Wl,[["__scopeId","data-v-f7fa04e6"]]),D=p=>(Y("data-v-21e18f40"),p=p(),q(),p),Ql={class:"care-scores"},Kl={class:"score-title"},Hl=D(()=>t("h5",null,"CARE Score",-1)),Xl=D(()=>t("i",{class:"fa-regular fa-circle-info"},null,-1)),Jl=[Xl],Zl={class:"circles"},Yl={class:"circle"},ql={class:"circle-name"},ea=D(()=>t("h3",null,"CARE Scores",-1)),ta=D(()=>t("p",null,[g("The CARE principles, developed by the "),t("a",{href:"https://www.gida-global.org/care",target:"_blank",rel:"noopener noreferrer"},"Global Indigenous Data Alliance (GIDA)"),g(", reflect the crucial role of data in advancing Indigenous innovation and self-determination. They ensure that data movements like the open data movement, whatever they're advocating and pursuing, respect the people and purpose behind the data.")],-1)),la={class:"score-details"},aa={class:"score-detail"},sa={class:"score-detail-title"},oa=D(()=>t("h4",null,"C - Collective Benefit",-1)),ra=D(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Data ecosystems shall be designed and function in ways that enable Indigenous Peoples to derive benefit from the data.")],-1)),na={class:"score-detail"},ia={class:"score-detail-title"},ca=D(()=>t("h4",null,"A - Authority to Control",-1)),ua=D(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Indigenous Peoples' rights and interests in Indigenous data must be recognised and their authority to control such data be empowered.")],-1)),da={class:"score-detail"},pa={class:"score-detail-title"},va=D(()=>t("h4",null,"R - Responsibility",-1)),ha=D(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Those working with Indigenous data have a responsibility to share how those data are used to support Indigenous Peoples' self-determination and collective benefit.")],-1)),fa={class:"score-detail"},_a={class:"score-detail-title"},ba=D(()=>t("h4",null,"E - Ethics",-1)),ma=D(()=>t("div",{class:"score-detail-desc"},[t("p",null,"Indigenous Peoples' rights and wellbeing should be the primary concern at all stages of the data life cycle and across the data ecosystem.")],-1)),ga=U({__name:"CareScore",props:{score:null},setup(p){const e=p,n={c:8,a:9,r:9,e:3},y=w(!1);return(S,s)=>(l(),i(b,null,[t("div",Ql,[t("div",Kl,[Hl,t("button",{class:"btn outline",onClick:s[0]||(s[0]=k=>y.value=!0),title:"Show details"},Jl)]),t("div",Zl,[(l(),i(b,null,M("care",k=>t("div",Yl,[N(O,{value:e.score[k],max:n[k],tickWhenComplete:""},null,8,["value","max"]),t("div",ql,m(k.toUpperCase()),1)])),64))])]),y.value?(l(),j(We,{key:0,onModalClosed:s[1]||(s[1]=k=>y.value=!1)},{headerMiddle:I(()=>[ea]),default:I(()=>[ta,t("div",la,[t("div",aa,[t("div",sa,[N(O,{value:e.score.c,max:n.c},null,8,["value","max"]),oa]),ra]),t("div",na,[t("div",ia,[N(O,{value:e.score.a,max:n.a},null,8,["value","max"]),ca]),ua]),t("div",da,[t("div",pa,[N(O,{value:e.score.r,max:n.r},null,8,["value","max"]),va]),ha]),t("div",fa,[t("div",_a,[N(O,{value:e.score.e,max:n.e},null,8,["value","max"]),ba]),ma])])]),_:1})):T("",!0)],64))}});const ka=z(ga,[["__scopeId","data-v-21e18f40"]]),ya=U({__name:"ScoreWidget",props:{score:null,name:null},setup(p){const e=p;return(n,y)=>e.name==="fair"?(l(),j(Gl,{key:0,score:p.score},null,8,["score"])):e.name==="care"?(l(),j(ka,{key:1,score:p.score},null,8,["score"])):T("",!0)}}),me=p=>(Y("data-v-04d7257c"),p=p(),q(),p),Ca=me(()=>t("th",null,"Concepts",-1)),$a={class:"concepts"},wa=me(()=>t("i",{class:"fa-regular fa-plus"},null,-1)),ja=me(()=>t("i",{class:"fa-regular fa-minus"},null,-1)),Pa=U({__name:"PropTableView",setup(p){const{namedNode:e}=bt,n=re(vt),y=re(ht),S=re(Ue),s=ct(),k=ut(),{store:f,prefixes:$,parseIntoStore:c,qnameToIri:a,iriToQname:H}=Ae(),{store:G,parseIntoStore:ge,qnameToIri:B,clearStore:ke}=Ae(),{data:Qe,profiles:ie,loading:ye,error:Ce,doRequest:Ke}=de(),{data:He,loading:Sa,error:xa,doRequest:Xe}=de(),{data:$e,loading:Ta,error:Ia,doRequest:we}=de(),je=[a("rdfs:label")],Je=[a("dcterms:description")],Ze=[a("geo:hasBoundingBox"),a("geo:hasGeometry")],Ye=[a("rdfs:member"),a("skos:member"),a("dcterms:hasPart")],qe=5,ce="lt-prfl:alt-profile",_=w({}),ee=w([]),V=w([]),ue=w([]),Pe=w([]),te=w(!0),le=w([]),Q=w(!1),ae=w(!1),F=w(null),X=w(!1),J=w({}),Se=w(""),se=w([a("a"),a("dcterms:identifier"),a("prez:count"),a("prez:childrenCount"),a("prez:link"),"https://linked.data.gov.au/def/scores/hasScore"]),W=w(null),E=w({showChildren:!1,childrenTitle:"",showButton:!1,buttonTitle:"",buttonLink:""}),oe=w(!1),xe=w({}),K=w(!1);function R(r){switch(_.value.baseClass=r,r){case a("dcat:Catalog"):X.value=!0,J.value={catalog:_.value.iri},E.value={...E.value,showChildren:!0,childrenTitle:"Resources"};break;case a("dcat:Resource"):break;case a("dcat:Dataset"):X.value=!0,J.value={dataset:_.value.iri},E.value={showChildren:!1,showButton:!0,childrenTitle:"Members",buttonTitle:"Collections",buttonLink:"/collections"};break;case a("geo:FeatureCollection"):X.value=!0,J.value={collection:_.value.iri},E.value={showChildren:!1,showButton:!0,childrenTitle:"Members",buttonTitle:"Features",buttonLink:"/items"};break;case a("geo:Feature"):break;case a("skos:ConceptScheme"):X.value=!0,J.value={vocab:_.value.iri},se.value.push(a("skos:hasTopConcept")),E.value.showChildren=!0;break;case a("skos:Collection"):E.value={...E.value,showChildren:!0,childrenTitle:"Concepts"};break;case a("skos:Concept"):break;case a("prof:Profile"):break}}function et(){const r=ae.value?e(s.query.uri):f.value.getSubjects(e(a("a")),e(_.value.baseClass),null)[0];_.value={iri:r.id,types:[]};const u=W.value.labelPredicates.length>0?W.value.labelPredicates:je,d=W.value.descriptionPredicates.length>0?W.value.labelPredicates:Je;se.value.push(...u,...d),f.value.forEach(o=>{if(u.includes(o.predicate.value))_.value.title=o.object.value;else if(d.includes(o.predicate.value))_.value.description=o.object.value;else if(Ye.includes(o.predicate.value))Se.value=o.predicate.value,se.value.push(o.predicate.value);else if(o.predicate.value===a("a")){R(o.object.value);const h=f.value.getObjects(o.object,e(a("rdfs:label")),null),C=f.value.getObjects(o.object,e(a("dcterms:description")),null),v=H(o.object.value);_.value.types.push({value:o.object.value,qname:v!==""?v:void 0,label:h.length>0?h[0].value:void 0,description:C.length>0?C[0].value:void 0})}else Ze.indexOf(o.predicate.value)>=0?f.value.forEach(h=>{le.value.push({label:"",fcLabel:"",wkt:h.object.value,uri:_.value.iri,link:`/object?uri=${_.value.iri}`})},o.object,e(a("geo:asWKT")),null,null):o.predicate.value==="https://linked.data.gov.au/def/scores/hasScore"&&y&&!oe.value?oe.value=!0:o.predicate.value===a("prez:childrenCount")&&(_.value.childrenCount=Number(o.object.value));if(!Q.value){const h=Re(o,f.value);ue.value.push(h);let C=0;Ne(o,f.value,C)}},r,null,null,null),oe.value&&tt(),le.value.forEach(o=>{o.label=_.value.title?_.value.title:_.value.iri})}function Te(r,u=!1){const d={};return f.value.forObjects(o=>{f.value.forEach(h=>{f.value.forObjects(C=>{f.value.forEach(v=>{const x=v.predicate.value.match(`https://linked.data.gov.au/def/scores/${r}([A-Z]){1}Score${u?"Normalised":""}`);x&&(d[x[1].toLowerCase()]=Number(v.object.value))},C,null,null,null)},h.subject,e("http://purl.org/linked-data/cube#observation"),null)},o,e(a("a")),e(`https://linked.data.gov.au/def/scores/${gt(r)}Score${u?"Normalised":""}`),null)},e(_.value.iri),e("https://linked.data.gov.au/def/scores/hasScore"),null),d}function tt(){xe.value={fair:Te("fair"),care:Te("care")}}function lt(){let r=[];if(ae.value)r.push({name:"Get Object by URI",url:"/object"});else{F.value&&r.push({name:ft(F.value)+" Home",url:`/${F.value[0].toLowerCase()}`});const u=s.path.split("/").slice(1,-1);let d=!1;u.forEach((o,h)=>{if(d){d=!1;return}switch(o){case"catalogs":r.push({name:"Catalogs",url:"/c/catalogs"}),h+1!==u.length&&(r.push({name:"Catalog",url:`/c/catalogs/${s.params.catalogId}`}),d=!0);break;case"datasets":r.push({name:"Datasets",url:"/s/datasets"}),h+1!==u.length&&(r.push({name:"Dataset",url:`/s/datasets/${s.params.datasetId}`}),d=!0);break;case"collections":r.push({name:"Feature Collections",url:`/s/datasets/${s.params.datasetId}/collections`}),h+1!==u.length&&(r.push({name:"Feature Collection",url:`/s/datasets/${s.params.datasetId}/collections/${s.params.featureCollectionId}`}),d=!0);break;case"items":r.push({name:"Features",url:`/s/datasets/${s.params.datasetId}/collections/${s.params.featureCollectionId}/items`});break;case"vocab":r.push({name:"Vocabularies",url:"/v/vocab"}),h+1!==u.length&&(r.push({name:"Vocabulary",url:`/v/vocab/${s.params.vocabId}`}),d=!0);break;case"collection":r.push({name:"Collections",url:"/v/collection"}),h+1!==u.length&&(r.push({name:"Collection",url:`/v/vocab/${s.params.collectionId}`}),d=!0);break;case"profiles":r.push({name:"Profiles",url:`${F.value?F.value[0].toLowerCase():""}/profiles`});break}})}return r.push({name:_.value.title||_.value.iri,url:s.path}),Q.value&&r.push({name:"Alternate Profiles",url:`${s.path}?_profile=${ce}`}),r}function Ie(r){let u=r.split("#");return u.length===1?u[0].split("/").slice(-1)[0]:u.slice(-1)[0]}function at(){if(_.value.baseClass===a("skos:ConceptScheme"))K.value?st():Ee();else{const r=W.value.labelPredicates.length>0?W.value.labelPredicates:je;f.value.forObjects(u=>{let d={iri:u.id,extras:{}};f.value.forEach(o=>{if(r.includes(o.predicate.value))d.title=o.object.value;else if(o.predicate.value===a("prez:link"))d.link=o.object.value;else if(o.predicate.value===a("a"))d.baseClass=o.object.value;else if(_.value.baseClass===a("dcat:Catalog")&&o.predicate.value===a("dcterms:publisher")){const h={iri:o.object.value,label:Ie(o.object.value)};f.value.forObjects(C=>{h.label=C.value},o.object,a("rdfs:label"),null),d.extras.publisher=h}else if(_.value.baseClass===a("dcat:Catalog")&&o.predicate.value===a("dcterms:creator")){const h={iri:o.object.value,label:Ie(o.object.value)};f.value.forObjects(C=>{h.label=C.value},o.object,a("rdfs:label"),null),d.extras.creator=h}else if(_.value.baseClass===a("dcat:Catalog")&&o.predicate.value===a("dcterms:issued")){const h={label:o.object.value};d.extras.issued=h}},u,null,null,null),ee.value.push(d)},e(_.value.iri),e(Se.value),null),ee.value.sort((u,d)=>u.title&&d.title?u.title.localeCompare(d.title):u.title?-1:d.title?1:u.iri.localeCompare(d.iri))}}function st(){let r=[];f.value.forSubjects(v=>{let x={iri:v.id,narrower:[],broader:"",title:"",link:"",childrenCount:0,children:[]};f.value.forEach(A=>{A.predicate.value===a("skos:prefLabel")?x.title=A.object.value:A.predicate.value===a("prez:link")?x.link=A.object.value:A.predicate.value===a("skos:narrower")?x.narrower.push(A.object.value):A.predicate.value===a("skos:broader")&&(x.broader=A.object.value)},v,null,null,null),x.childrenCount=x.narrower.length,r.push(x)},e(a("skos:inScheme")),e(_.value.iri),null);const u=f.value.getObjects(e(_.value.iri),e(a("skos:hasTopConcept")),null).map(v=>v.id),d=f.value.getSubjects(e(a("skos:topConceptOf")),e(_.value.iri),null).map(v=>v.id),o=[...new Set([...u,...d])],h=r.reduce((v,x,A)=>(v[x.iri]=A,v),{});let C=[];r.forEach(v=>{if(v.narrower.length>0&&v.narrower.forEach(x=>{r[h[x]].broader=v.iri}),o.includes(v.iri)){C.push(v);return}if(!!v.broader&&v.broader!==""){const x=r[h[v.broader]];x.children=[...x.children||[],v].sort((A,rt)=>A.title.localeCompare(rt.title)),x.childrenCount=x.children.length}}),C.sort((v,x)=>v.title.localeCompare(x.title)),V.value=C}function Ee(r=1){ke(),we(`${n}${s.path}/top-concepts?page=${r}&per_page=${S}`,()=>{ge($e.value),G.value.forObjects(u=>{let d={iri:u.id,title:"",link:"",childrenCount:0,children:[],color:""};G.value.forEach(o=>{o.predicate.value===B("skos:prefLabel")?d.title=o.object.value:o.predicate.value===B("prez:link")?d.link=o.object.value:o.predicate.value===B("prez:childrenCount")?d.childrenCount=Number(o.object.value):o.predicate.value===B("sdo:color")&&(d.color=o.object.value)},u,null,null,null),V.value.push(d)},e(_.value.iri),e(B("skos:hasTopConcept")),null),V.value.sort((u,d)=>u.title.localeCompare(d.title))})}function ot({iriPath:r,link:u,page:d=1}){ke(),we(`${n}${u}/narrowers?page=${d}&per_page=${S}`,()=>{let o;r.split("|").forEach((h,C)=>{C===0?o=V.value.find(v=>v.iri===h):o=o.children.find(v=>v.iri===h)}),ge($e.value),G.value.forObjects(h=>{let C={iri:h.id,title:"",link:"",childrenCount:0,children:[],color:""};G.value.forEach(v=>{v.predicate.value===B("skos:prefLabel")?C.title=v.object.value:v.predicate.value===B("prez:link")?C.link=v.object.value:v.predicate.value===B("prez:childrenCount")?C.childrenCount=Number(v.object.value):v.predicate.value===B("sdo:color")&&(C.color=v.object.value)},h,null,null,null),o.children.push(C)},e(o.iri),e(B("skos:narrower")),null),o.children.sort((h,C)=>h.title.localeCompare(C.title))})}function Re(r,u){return{subject:r.subject,predicate:{termType:r.predicate.termType,value:r.predicate.value,id:r.predicate.id,annotations:u.getQuads(r.predicate,null,null,null)},object:{termType:r.object.termType,value:r.object.value,id:r.object.id,datatype:r.object instanceof Be?r.object.datatype:void 0,language:r.object instanceof Be?r.object.language:void 0,annotations:u.getQuads(r.object,null,null,null)},value:r.value,graph:r.graph,termType:r.termType,equals:r.equals,toJSON:r.toJSON}}function Ne(r,u,d){r.object instanceof _t&&(d++,u.forEach(o=>{const h=Re(o,u);Pe.value.push(h),d<qe&&Ne(o,u,d)},r.object,null,null,null))}dt(()=>{s.path.startsWith("/c/")?(F.value="CatPrez",s.path.match(/c\/profiles\/.+/)?R(a("prof:Profile")):s.path.match(/c\/catalogs\/.+\/.+/)?R(a("dcat:Resource")):s.path.match(/c\/catalogs\/.+/)&&R(a("dcat:Catalog"))):s.path.startsWith("/s/")?(F.value="SpacePrez",s.path.match(/s\/profiles\/.+/)?R(a("prof:Profile")):s.path.match(/s\/datasets\/.+\/collections\/.+\/items\/.+/)?R(a("geo:Feature")):s.path.match(/s\/datasets\/.+\/collections\/.+/)?R(a("geo:FeatureCollection")):s.path.match(/s\/datasets\/.+/)&&R(a("dcat:Dataset"))):s.path.startsWith("/v/")?(F.value="VocPrez",s.path.match(/v\/profiles\/.+/)?R(a("prof:Profile")):s.path.match(/v\/vocab\/.+\/.+/)||s.path.match(/v\/collection\/.+\/.+/)?R(a("skos:Concept")):s.path.match(/v\/vocab\/.+/)?R(a("skos:ConceptScheme")):s.path.match(/v\/collection\/.+/)&&R(a("skos:Collection"))):s.path.startsWith("/profiles/")?R(a("prof:Profile")):s.path.startsWith("/object")&&(ae.value=!0),s.query._profile===ce&&!s.query._mediatype&&(Q.value=!0)});function Le(){Ke(`${n}${K.value?s.path+"/all"+window.location.search:s.fullPath}`,()=>{W.value=k.profiles[ie.value.find(r=>r.default).uri],s.query&&s.query._profile&&(s.query._mediatype||![W.value.token,ce].includes(s.query._profile))&&window.location.replace(`${n}${s.path}?_profile=${s.query._profile}${s.query._mediatype?`&_mediatype=${s.query._mediatype}`:""}`),Q.value?k.rightNavConfig={enabled:!1}:k.rightNavConfig={enabled:!0,profiles:ie.value,currentUrl:s.path},c(Qe.value),et(),!Q.value&&E.value.showChildren&&at(),document.title=_.value.title?`${_.value.title} | Prez`:"Prez",k.breadcrumbs=lt()})}return Me(()=>{ye.value=!0,mt().then(()=>{console.log("profiles ready"),_.value.baseClass===a("skos:ConceptScheme")?Xe(`${n}/count?curie=${s.path.split("/").slice(-1)[0]}&inbound=${encodeURIComponent(a("skos:inScheme"))}`,()=>{parseInt(He.value.replace('"',""))<=S&&(K.value=!0),Le()}):Le()})}),(r,u)=>{const d=ze("RouterLink");return Q.value?(l(),j(yt,{key:0,profiles:P(ie),path:P(s).path},null,8,["profiles","path"])):(l(),i(b,{key:1},[ue.value.length>0?(l(),j(nl,{key:0,item:_.value,properties:ue.value,blankNodes:Pe.value,prefixes:P($),hiddenPreds:se.value},pt({map:I(()=>[le.value.length?(l(),j(jt,{key:0,ref:"searchMapRef","geo-w-k-t":le.value},null,8,["geo-w-k-t"])):T("",!0)]),_:2},[_.value.baseClass===P(a)("skos:ConceptScheme")?{name:"bottom",fn:I(()=>[t("tr",null,[Ca,t("td",null,[t("div",$a,[K.value?(l(),i("button",{key:0,id:"collapse-all-btn",onClick:u[0]||(u[0]=o=>te.value=!te.value),class:"btn"},[te.value?(l(),i(b,{key:0},[wa,g(" Expand all")],64)):(l(),i(b,{key:1},[ja,g(" Collapse all")],64))])):T("",!0),(l(!0),i(b,null,M(V.value,o=>(l(),j(dl,fe(o,{baseUrl:P(s).path,collapseAll:te.value,parentPath:"",doNarrowerEmits:!K.value,onGetNarrowers:u[1]||(u[1]=h=>ot(h))}),null,16,["baseUrl","collapseAll","doNarrowerEmits"]))),256))]),!K.value&&V.value.length>0&&_.value.childrenCount>V.value.length?(l(),i("button",{key:0,class:"btn outline sm",onClick:u[2]||(u[2]=o=>Ee(Math.round(V.value.length/P(S))+1)),style:{marginLeft:"26px"}}," Load more ")):T("",!0)])])]),key:"0"}:E.value.showChildren?{name:"bottom",fn:I(()=>[t("tr",null,[t("th",null,m(E.value.childrenTitle),1),_.value.baseClass===P(a)("dcat:Catalog")?(l(),j(Ct,{key:0,items:ee.value,predicates:["publisher","creator","issued"]},null,8,["items"])):(l(),i("td",{key:1},[t("div",{class:"children-list"},[(l(!0),i(b,null,M(ee.value,o=>(l(),j(d,{to:o.link||""},{default:I(()=>[g(m(o.title||o.iri),1)]),_:2},1032,["to"]))),256))])]))])]),key:"1"}:E.value.showButton&&!ae.value?{name:"bottom",fn:I(()=>[t("tr",null,[t("th",null,m(E.value.childrenTitle),1),t("td",null,[N(d,{to:`${P(s).path}${E.value.buttonLink}`,class:"btn"},{default:I(()=>[g(m(E.value.buttonTitle),1)]),_:1},8,["to"])])])]),key:"2"}:void 0]),1032,["item","properties","blankNodes","prefixes","hiddenPreds"])):P(ye)?(l(),j(wt,{key:1})):P(Ce)?(l(),j($t,{key:2,message:P(Ce)},null,8,["message"])):T("",!0),X.value?(l(),j(De,{key:3,to:"#search-teleport"},[F.value?(l(),j(kt,{key:0,flavour:F.value,query:J.value},null,8,["flavour","query"])):T("",!0)])):T("",!0),P(y)&&oe.value?(l(),j(De,{key:4,to:"#score-teleport"},[(l(!0),i(b,null,M(Object.entries(xe.value),([o,h])=>(l(),j(ya,{name:o,score:h},null,8,["name","score"]))),256))])):T("",!0)],64))}}});const Fa=z(Pa,[["__scopeId","data-v-04d7257c"]]);export{Fa as default};
