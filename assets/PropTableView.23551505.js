import{_ as I,a as t,c as l,J as B,b as n,d as N,f as S,w,C as v,t as d,F as c,K as ce,g as R,k as V,s as A,L as K,M as G,r as P,o as X,N as pe,O as J,p as Y,h as Z,n as de,A as L,e as j,R as fe,P as q,Q as ee,u as ve,m as _e,l as he,H as me,S as be,T as ye,i as ge,I as ke,D as Ce,x as $e}from"./index.f3ae3f3c.js";/* empty css                                                                */import{A as je}from"./AdvancedSearch.b825c5ec.js";const Pe={},we={class:"tooltip"},Se={class:"tooltip-text"};function Te(p,e){return t(),l("span",we,[B(p.$slots,"default",{},void 0,!0),n("span",Se,[B(p.$slots,"text",{},void 0,!0)])])}const xe=I(Pe,[["render",Te],["__scopeId","data-v-5b46f6b0"]]),Ie=["href"],Ne=N({__name:"PredCell",props:{iri:null,qname:null,label:null,description:null,explanation:null},setup(p){const e=p;return(u,y)=>(t(),l("th",null,[(t(),S(ce(e.description?xe:"slot"),null,{text:w(()=>[v(d(e.description),1)]),default:w(()=>[n("a",{href:e.iri,target:"_blank",rel:"noopener noreferrer"},[e.label?(t(),l(c,{key:0},[v(d(e.label),1)],64)):e.qname?(t(),l(c,{key:1},[v(d(e.qname),1)],64)):(t(),l(c,{key:2},[v(d(e.iri),1)],64))],8,Ie)]),_:1}))]))}}),Be={class:"prop-obj"},Re={class:"obj-value"},Ae=["href"],De=["href"],Fe=["href"],Oe=["href"],Ve={class:"obj-tag"},ze={key:0,class:"badge outline",title:"Language"},Le=["href"],Ue=N({__name:"ObjCell",props:{value:null,qname:null,datatype:null,language:null,description:null,termType:null,label:null,rows:null},setup(p){const e=p;return(u,y)=>(t(),l("div",Be,[n("div",Re,[e.termType==="BlankNode"?(t(),l(c,{key:0},[v(" blank node ")],64)):e.termType==="NamedNode"?(t(),l(c,{key:1},[e.label?(t(),l("a",{key:0,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.label),9,Ae)):e.qname?(t(),l("a",{key:1,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.qname),9,De)):(t(),l("a",{key:2,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.value),9,Fe))],64)):(t(),l(c,{key:2},[e.value.startsWith("http")?(t(),l("a",{key:0,href:e.value,target:"_blank",rel:"noopener noreferrer"},d(e.value),9,Oe)):(t(),l(c,{key:1},[v(d(e.value),1)],64))],64))]),n("div",Ve,[e.language?(t(),l("span",ze,d(e.language),1)):e.datatype?(t(),l("a",{key:1,href:e.datatype.value,target:"_blank",rel:"noopener noreferrer",class:"badge outline",title:"Datatype"},[e.datatype.qname?(t(),l(c,{key:0},[v(d(e.datatype.qname),1)],64)):(t(),l(c,{key:1},[v(d(e.datatype.value),1)],64))],8,Le)):R("",!0)])]))}}),Ee=I(Ue,[["__scopeId","data-v-027097f9"]]),Me={class:"prop-objs"},We=N({__name:"PropRow",props:{iri:null,objs:null,qname:null,label:null,description:null,explanation:null,order:null},setup(p){const e=p;return(u,y)=>(t(),l("tr",null,[V(Ne,{iri:e.iri,qname:e.qname,label:e.label,description:e.description,explanation:e.explanation},null,8,["iri","qname","label","description","explanation"]),n("td",Me,[(t(!0),l(c,null,A(e.objs,i=>(t(),S(Ee,K(G(i)),null,16))),256))])]))}}),He=I(We,[["__scopeId","data-v-3863cf0a"]]),U=p=>(Y("data-v-344a4af2"),p=p(),Z(),p),Qe={class:"page-title"},Je={class:"iri"},Ke=U(()=>n("span",{class:"badge"},"IRI",-1)),Ge=["href"],Xe=U(()=>n("i",{class:"fa-regular fa-clipboard"},null,-1)),Ye=[Xe],Ze={class:"type"},qe=U(()=>n("span",{class:"badge"},"Type",-1)),et=["href"],tt={key:0},lt=N({__name:"PropTableNew",props:{item:null,properties:null,prefixes:null,hiddenPreds:null},setup(p){const e=p,u=P({});function y(o){let m="";return Object.entries(e.prefixes).forEach(([a,x])=>{o.value.startsWith(x)&&(m=a+":"+o.value.split(x)[1])}),m}function i(o){if(o==="a")return e.prefixes.rdf+"type";{const[m,a]=o.split(":");return e.prefixes[m]+a}}function C(o,m){return o.annotations.find(a=>a.predicate.value===i(m))?.object.value}function h(){navigator.clipboard.writeText(e.item.iri.trim())}return X(()=>{e.properties.filter(o=>!e.hiddenPreds.includes(o.predicate.value)).forEach(o=>{var m,a;(m=u.value)[a=o.predicate.value]??(m[a]={iri:o.predicate.value,objs:[],qname:y(o.predicate),label:C(o.predicate,"rdfs:label"),description:C(o.predicate,"dcterms:description"),explanation:C(o.predicate,"dcterms:provenance"),order:0}),u.value[o.predicate.value].objs.push({value:o.object.value,qname:o.object instanceof pe?y(o.object):void 0,datatype:o.object instanceof J?{value:o.object.datatype.value,qname:y(o.object.datatype)}:void 0,language:o.object instanceof J?o.object.language:void 0,description:void 0,termType:o.object.termType,label:void 0,rows:[]})})}),(o,m)=>(t(),l(c,null,[n("h1",Qe,[v(d(e.item.title)+" ",1),n("small",Je,[Ke,n("a",{href:e.item.iri,target:"_blank",rel:"noopener noreferrer"},d(e.item.iri),9,Ge),n("button",{class:"btn outline sm",title:"Copy IRI",onClick:m[0]||(m[0]=a=>h())},Ye)]),n("small",Ze,[qe,n("a",{href:e.item.type,target:"_blank",rel:"noopener noreferrer"},d(e.item.type),9,et)])]),B(o.$slots,"map",{},void 0,!0),e.item.description?(t(),l("p",tt,[n("em",null,d(e.item.description),1)])):R("",!0),n("table",null,[B(o.$slots,"top",{},void 0,!0),(t(!0),l(c,null,A(Object.values(u.value).sort((a,x)=>a.order-x.order),a=>(t(),S(He,K(G(a)),null,16))),256)),B(o.$slots,"bottom",{},void 0,!0)])],64))}});const at=I(lt,[["__scopeId","data-v-344a4af2"]]),nt={class:"concept-top"},ot={key:1,class:"concept-left"},rt=N({__name:"ConceptComponent",props:{iri:null,title:null,link:null,children:null,narrower:null,broader:null,baseUrl:null,collapseAll:{type:Boolean}},setup(p){const e=p,u=P(!0);return de(()=>e.collapseAll,(y,i)=>{u.value=y}),(y,i)=>{const C=ee("ConceptComponent",!0);return t(),l(c,null,[n("div",nt,[e.children?(t(),l("button",{key:0,class:"concept-left btn outline",onClick:i[0]||(i[0]=h=>u.value=!u.value)},[n("i",{class:L(`fa-regular fa-${u.value?"plus":"minus"}`)},null,2)])):(t(),l("div",ot)),V(j(fe),{class:"concept",to:e.link},{default:w(()=>[v(d(e.title||e.iri),1)]),_:1},8,["to"])]),e.children?(t(),l("div",{key:0,class:L(`concept-children ${u.value?"collapse":""}`)},[(t(!0),l(c,null,A(e.children,h=>(t(),S(C,q(h,{baseUrl:e.baseUrl,collapseAll:e.collapseAll}),null,16,["baseUrl","collapseAll"]))),256))],2)):R("",!0)],64)}}});const st=I(rt,[["__scopeId","data-v-e0711a9f"]]),D=p=>(Y("data-v-fe4a48b9"),p=p(),Z(),p),it=D(()=>n("th",null,"Concepts",-1)),ut=D(()=>n("i",{class:"fa-regular fa-chevron-down"},null,-1)),ct=D(()=>n("i",{class:"fa-regular fa-chevron-up"},null,-1)),pt=D(()=>n("i",{class:"fa-regular fa-plus"},null,-1)),dt=D(()=>n("i",{class:"fa-regular fa-minus"},null,-1)),ft=N({__name:"PropTableView",props:{type:null,getChildren:{type:Boolean,default:!1},childPred:{default:""},childTitlePred:{default:""},childDisplayTitle:{default:"Members"},childButton:null,titlePred:null,descPred:null,enableSearch:{type:Boolean}},setup(p){const e=p,{namedNode:u}=Ce,y=ge($e),i=ke(),C=ve(),{store:h,prefixes:o,parseIntoStore:m,qname:a}=_e(),{data:x,profiles:te,loading:le,error:E,doRequest:ae}=he(),ne=[a("a"),a("dcterms:identifier"),a("prez:count"),a(e.titlePred),a(e.descPred),...e.type==="skos:ConceptScheme"?[a("skos:hasTopConcept")]:[],...e.childPred?[a(e.childPred)]:[]],T=me(()=>i.path.startsWith("/c/")?"CatPrez":i.path.startsWith("/s/")?"SpacePrez":i.path.startsWith("/v/")?"VocPrez":void 0),_=P({}),M=P([]),W=P([]),z=P([]),F=P(!0),O=P(!0);function oe(){const s=h.value.getSubjects(u(a("a")),u(a(e.type)),null)[0];_.value.iri=s.id,h.value.forEach(r=>{r.predicate.value===a(e.titlePred)?_.value.title=r.object.value:r.predicate.value===a(e.descPred)?_.value.description=r.object.value:r.predicate.value===a("a")&&(_.value.type=r.object.value);const g={termType:r.predicate.termType,value:r.predicate.value,id:r.predicate.id,annotations:h.value.getQuads(r.predicate,null,null,null)},k={subject:r.subject,predicate:g,object:r.object,value:r.value,graph:r.graph,termType:r.termType,equals:r.equals,toJSON:r.toJSON};z.value.push(k)},s,null,null,null)}function re(){let s=[];h.value.forSubjects(f=>{let b={iri:f.id,narrower:[],broader:"",title:"",link:""};h.value.forEach($=>{$.predicate.value===a(e.childTitlePred)?b.title=$.object.value:$.predicate.value===a("prez:link")?b.link=$.object.value:$.predicate.value===a("skos:narrower")?b.narrower.push($.object.value):$.predicate.value===a("skos:broader")&&(b.broader=$.object.value)},f,null,null,null),s.push(b)},u(a("skos:inScheme")),u(_.value.iri),null);const r=h.value.getObjects(u(_.value.iri),u(a("skos:hasTopConcept")),null).map(f=>f.id),g=h.value.getSubjects(u(a("skos:topConceptOf")),u(_.value.iri),null).map(f=>f.id),k=[...new Set([...r,...g])],H=s.reduce((f,b,$)=>(f[b.iri]=$,f),{});let Q=[];s.forEach(f=>{if(f.narrower.length>0&&f.narrower.forEach(b=>s[H[b]].broader=f.iri),k.includes(f.iri)){Q.push(f);return}if(f.broader){const b=s[H[f.broader]];b.children=[...b.children||[],f]}}),W.value=Q}function se(){e.type==="skos:ConceptScheme"?re():h.value.forObjects(s=>{let r={iri:s.id};h.value.forEach(g=>{g.predicate.value===a(e.childTitlePred)?r.title=g.object.value:g.predicate.value===a("prez:link")&&(r.link=g.object.value)},s,null,null,null),M.value.push(r)},u(_.value.iri),u(a(e.childPred)),null)}function ie(){let s=[];return T.value?(s.push({name:T.value,url:`/${T.value[0].toLowerCase()}`}),["skos:ConceptScheme","skos:Concept"].includes(e.type)&&s.push({name:"Vocabs",url:"/v/vocab"}),["skos:Concept"].includes(e.type)&&s.push({name:"Vocab",url:`/v/vocab/${i.params.vocabId}`}),["skos:Collection"].includes(e.type)&&s.push({name:"Collections",url:"/v/collection"}),["dcat:Catalog","dcat:Resource"].includes(e.type)&&s.push({name:"Catalogs",url:"/c/catalogs"}),["dcat:Resource"].includes(e.type)&&s.push({name:"Catalog",url:`/c/catalogs/${i.params.catalogId}`}),["dcat:Dataset","geo:FeatureCollection","geo:Feature"].includes(e.type)&&s.push({name:"Datasets",url:"/s/datasets"}),["geo:FeatureCollection","geo:Feature"].includes(e.type)&&(s.push({name:"Dataset",url:`/s/datasets/${i.params.datasetId}`}),s.push({name:"Feature Collections",url:`/s/datasets/${i.params.datasetId}/collections`})),["geo:Feature"].includes(e.type)&&(s.push({name:"Feature Collection",url:`/s/datasets/${i.params.datasetId}/collections/${i.params.featureCollectionId}`}),s.push({name:"Features",url:`/s/datasets/${i.params.datasetId}/collections/${i.params.featureCollectionId}/items`}))):e.type==="prof:Profile"&&s.push({name:"Profiles",url:"/profiles"}),s}function ue(){if(e.enableSearch)switch(e.type){case"skos:ConceptScheme":return{vocab:_.value.iri};case"dcat:Catalog":return{catalog:_.value.iri};case"dcat:Dataset":return{dataset:_.value.iri};case"geo:FeatureCollection":return{collection:_.value.iri};default:return{}}else return{}}return X(()=>{ae(`${y.replace(/\/$/,"")}${i.path}`,()=>{m(x.value),oe(),e.getChildren&&se(),C.rightNavConfig={enabled:!0,profiles:te.value,currentUrl:i.path},document.title=`${_.value.title||e.type.split(":")[1]} | Prez`,T.value?C.pageHeading={name:T.value,url:`/${T.value[0].toLowerCase()}`}:C.pageHeading={name:"Prez",url:"/"},C.breadcrumbs=[...ie(),{name:_.value.title||e.type.split(":")[1],url:i.path}]})}),(s,r)=>{const g=ee("RouterLink");return t(),l(c,null,[z.value.length>0?(t(),S(at,{key:0,item:_.value,properties:z.value,prefixes:j(o),hiddenPreds:ne},be({_:2},[e.type==="skos:ConceptScheme"?{name:"bottom",fn:w(()=>[n("tr",null,[it,n("td",null,[n("button",{id:"concept-hide-btn",class:"btn",onClick:r[0]||(r[0]=k=>F.value=!F.value)},[F.value?(t(),l(c,{key:0},[v("Show "),ut],64)):(t(),l(c,{key:1},[v("Hide "),ct],64))]),n("div",{class:L(`concepts ${F.value?"collapse":""}`)},[n("button",{id:"collapse-all-btn",onClick:r[1]||(r[1]=k=>O.value=!O.value),class:"btn"},[O.value?(t(),l(c,{key:0},[pt,v(" Expand all")],64)):(t(),l(c,{key:1},[dt,v(" Collapse all")],64))]),(t(!0),l(c,null,A(W.value,k=>(t(),S(st,q(k,{baseUrl:j(i).path,collapseAll:O.value}),null,16,["baseUrl","collapseAll"]))),256))],2)])])]),key:"0"}:e.getChildren?{name:"bottom",fn:w(()=>[n("tr",null,[n("th",null,d(e.childDisplayTitle),1),n("td",null,[n("div",{class:"children-list"},[(t(!0),l(c,null,A(M.value,k=>(t(),S(g,{to:k.link||""},{default:w(()=>[v(d(k.title||k.iri),1)]),_:2},1032,["to"]))),256))])])])]),key:"1"}:e.childButton?{name:"bottom",fn:w(()=>[n("tr",null,[n("th",null,"Members"),n("td",null,[V(g,{to:`${j(i).path}${e.childButton.url}`,class:"btn"},{default:w(()=>[v(d(e.childButton.name),1)]),_:1},8,["to"])])])]),key:"2"}:void 0]),1032,["item","properties","prefixes"])):j(le)?(t(),l(c,{key:1},[v("loading...")],64)):j(E)?(t(),l(c,{key:2},[v("Network error: "+d(j(E)),1)],64)):R("",!0),e.enableSearch?(t(),S(ye,{key:3,to:"#right-bar-content"},[V(je,{flavour:j(T),query:ue()},null,8,["flavour","query"])])):R("",!0)],64)}}});const mt=I(ft,[["__scopeId","data-v-fe4a48b9"]]);export{mt as default};
